"use strict";(self.webpackChunkarkanoid_phaser3_webpack=self.webpackChunkarkanoid_phaser3_webpack||[]).push([[143],{72115:(t,e,o)=>{o.d(e,{Z:()=>s});var n=o(66213),i=o.n(n),a=o(23645),r=o.n(a)()(i());r.push([t.id,"/* cyrillic-ext */\r\n@font-face {\r\n  font-family: 'Rubik Wet Paint';\r\n  font-style: normal;\r\n  font-weight: 400;\r\n  font-display: swap;\r\n  src: url(fonts/HTx0L20uMDGHgdULcpTF3Oe4d_-18Tb253A.woff2) format('woff2');\r\n  unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F,\r\n    U+FE2E-FE2F;\r\n}\r\n/* cyrillic */\r\n@font-face {\r\n  font-family: 'Rubik Wet Paint';\r\n  font-style: normal;\r\n  font-weight: 400;\r\n  font-display: swap;\r\n  src: url(fonts/HTx0L20uMDGHgdULcpTF3Oe4d_-1-Db253A.woff2) format('woff2');\r\n  unicode-range: U+0301, U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;\r\n}\r\n/* latin */\r\n@font-face {\r\n  font-family: 'Rubik Wet Paint';\r\n  font-style: normal;\r\n  font-weight: 400;\r\n  font-display: swap;\r\n  src: url(fonts/HTx0L20uMDGHgdULcpTF3Oe4d_-1_Db2.woff2) format('woff2');\r\n  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA,\r\n    U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215,\r\n    U+FEFF, U+FFFD;\r\n}\r\n\r\n:root {\r\n  background-color: #242424;\r\n}\r\n\r\n* {\r\n  margin: 0;\r\n  box-sizing: border-box;\r\n}\r\n\r\nbody,\r\nhtml {\r\n  height: 100%;\r\n  width: 100%;\r\n  overflow: hidden;\r\n}\r\n\r\n#app {\r\n  position: absolute;\r\n  left: 50%;\r\n  top: 0;\r\n  transform: translate(-50%, 0);\r\n}\r\n",""]);const s=r},23645:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var o="",n=void 0!==e[5];return e[4]&&(o+="@supports (".concat(e[4],") {")),e[2]&&(o+="@media ".concat(e[2]," {")),n&&(o+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),o+=t(e),n&&(o+="}"),e[2]&&(o+="}"),e[4]&&(o+="}"),o})).join("")},e.i=function(t,o,n,i,a){"string"==typeof t&&(t=[[null,t,void 0]]);var r={};if(n)for(var s=0;s<this.length;s++){var l=this[s][0];null!=l&&(r[l]=!0)}for(var u=0;u<t.length;u++){var c=[].concat(t[u]);n&&r[c[0]]||(void 0!==a&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=a),o&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=o):c[2]=o),i&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=i):c[4]="".concat(i)),e.push(c))}},e}},66213:t=>{t.exports=function(t){return t[1]}},93379:t=>{var e=[];function o(t){for(var o=-1,n=0;n<e.length;n++)if(e[n].identifier===t){o=n;break}return o}function n(t,n){for(var a={},r=[],s=0;s<t.length;s++){var l=t[s],u=n.base?l[0]+n.base:l[0],c=a[u]||0,p="".concat(u," ").concat(c);a[u]=c+1;var h=o(p),f={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==h)e[h].references++,e[h].updater(f);else{var d=i(f,n);n.byIndex=s,e.splice(s,0,{identifier:p,updater:d,references:1})}r.push(p)}return r}function i(t,e){var o=e.domAPI(e);return o.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;o.update(t=e)}else o.remove()}}t.exports=function(t,i){var a=n(t=t||[],i=i||{});return function(t){t=t||[];for(var r=0;r<a.length;r++){var s=o(a[r]);e[s].references--}for(var l=n(t,i),u=0;u<a.length;u++){var c=o(a[u]);0===e[c].references&&(e[c].updater(),e.splice(c,1))}a=l}}},90569:t=>{var e={};t.exports=function(t,o){var n=function(t){if(void 0===e[t]){var o=document.querySelector(t);if(window.HTMLIFrameElement&&o instanceof window.HTMLIFrameElement)try{o=o.contentDocument.head}catch(t){o=null}e[t]=o}return e[t]}(t);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");n.appendChild(o)}},19216:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},3565:(t,e,o)=>{t.exports=function(t){var e=o.nc;e&&t.setAttribute("nonce",e)}},7795:t=>{t.exports=function(t){var e=t.insertStyleElement(t);return{update:function(o){!function(t,e,o){var n="";o.supports&&(n+="@supports (".concat(o.supports,") {")),o.media&&(n+="@media ".concat(o.media," {"));var i=void 0!==o.layer;i&&(n+="@layer".concat(o.layer.length>0?" ".concat(o.layer):""," {")),n+=o.css,i&&(n+="}"),o.media&&(n+="}"),o.supports&&(n+="}");var a=o.sourceMap;a&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),e.styleTagTransform(n,t,e.options)}(e,t,o)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},44589:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},27686:(t,e,o)=>{o(18844);var n=o(93379),i=o.n(n),a=o(7795),r=o.n(a),s=o(90569),l=o.n(s),u=o(3565),c=o.n(u),p=o(19216),h=o.n(p),f=o(44589),d=o.n(f),y=o(72115),g={};g.styleTagTransform=d(),g.setAttributes=c(),g.insert=l().bind(null,"head"),g.domAPI=r(),g.insertStyleElement=h(),i()(y.Z,g),y.Z&&y.Z.locals&&y.Z.locals;var m,b=function(){function t(t,e,o){this.sceneRef=t,this.gameState=e,this.globalConfig=o}return t.prototype.update=function(){},t.prototype.remove=function(){},t}(),_=(m=function(t,e){return m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},m(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=t}m(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),v=function(t){function e(e,o,n,i){var a=t.call(this,e,o,n)||this;return a.button=e.add.image((null==i?void 0:i.x)||0,(null==i?void 0:i.y)||0,"additionalHPButton"),a.button.displayWidth=n.VIEWPORT_WIDTH/6,a.button.displayHeight=n.VIEWPORT_WIDTH/7,a.button.y-=a.button.displayHeight/2,a.button.setInteractive({cursor:"pointer"}),a.button.on("pointerdown",(function(){a.button.setTexture("additionalHPButtonPressed")})),a.button.on("pointerup",(function(){a.button.setTexture("additionalHPButton"),a.gameState.playerHP+=Ot.PLAYER_MAX_HP,a.gameState.stateTransition("GAME_OVER","BALL_ATTACHED_TO_PLATFROM")})),e.input.on("pointerup",(function(){a.button.setTexture("additionalHPButton")})),a}return _(e,t),e.prototype.update=function(){},e.prototype.remove=function(){this.button.destroy()},e}(b),O=function(){var t=function(e,o){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},t(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),P=function(t){function e(e,o,n,i){var a=t.call(this,e,o,n)||this;return a.button=e.add.image((null==i?void 0:i.x)||0,(null==i?void 0:i.y)||0,"homeButton"),a.button.displayWidth=n.VIEWPORT_WIDTH/8,a.button.displayHeight=n.VIEWPORT_WIDTH/8,a.button.x-=a.button.displayWidth/2,a.button.y-=a.button.displayHeight/2,a.button.setInteractive({cursor:"pointer"}),a.button.on("pointerdown",(function(){a.button.setTexture("homeButtonPressed")})),a.button.on("pointerup",(function(){a.button.setTexture("homeButton"),e.scene.start("menuScene")})),e.input.on("pointerup",(function(){a.button.setTexture("homeButton")})),a}return O(e,t),e.prototype.update=function(){},e.prototype.remove=function(){this.button.destroy()},e}(b),S=function(){var t=function(e,o){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},t(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),T=function(t){function e(e,o,n,i){var a=t.call(this,e,o,n)||this;return a.button=e.add.image(i.x||0,i.y||0,"reloadButton"),a.button.displayWidth=n.VIEWPORT_WIDTH/8,a.button.displayHeight=n.VIEWPORT_WIDTH/8,a.button.x+=a.button.displayWidth/2,a.button.y-=a.button.displayHeight/2,a.button.setInteractive({cursor:"pointer"}),a.button.on("pointerdown",(function(){a.button.setTexture("reloadButtonPressed")})),a.button.on("pointerup",(function(){a.button.setTexture("reloadButton"),e.scene.restart()})),e.input.on("pointerup",(function(){a.button.setTexture("reloadButton")})),a}return S(e,t),e.prototype.update=function(){},e.prototype.remove=function(){this.button.destroy()},e}(b),w=function(){var t=function(e,o){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},t(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),x=function(t){function e(e,o,n){var i=t.call(this,e,o,n)||this,a=e.add.group(),r=Ot.VIEWPORT_HEIGHT/1.5;i.bg=e.add.image(0,0,"gameoverBg"),i.bg.displayWidth=Ot.VIEWPORT_WIDTH-20,i.bg.displayHeight=Ot.VIEWPORT_HEIGHT-r,a.add(i.bg),i.bg.x=n.VIEWPORT_WIDTH/2,i.bg.y=n.VIEWPORT_HEIGHT/2;var s=1.3*(i.bg.displayWidth-20)/"Игра окончена".length;i.header=e.add.text(i.bg.displayWidth/2+15,i.bg.y-i.bg.displayHeight/2+s+25,"Игра окончена",{fontFamily:"Rubik Wet Paint",fontSize:"".concat(s,"px")}),i.header.setOrigin(.5,.5),a.add(i.header),i.headerScore=e.add.text(i.bg.displayWidth/2,i.bg.y-i.bg.displayHeight/2+s+20+25+20,"Очков: ".concat(o.playerScore),{fontFamily:"Rubik Wet Paint",fontSize:"".concat(20,"px")}),i.headerScore.setOrigin(.5,.5),a.add(i.headerScore);var l=(new Phaser.Math.Vector2).setFromObject({x:(Ot.VIEWPORT_WIDTH-i.bg.displayWidth)/2+40,y:i.bg.y+i.bg.displayHeight/2+-40});i.reloadButton=new T(e,o,n,l);var u=(new Phaser.Math.Vector2).setFromObject({x:Ot.VIEWPORT_WIDTH-(Ot.VIEWPORT_WIDTH-i.bg.displayWidth)/2-40,y:i.bg.y+i.bg.displayHeight/2+-40});i.homeButton=new P(e,o,n,u);var c=(new Phaser.Math.Vector2).setFromObject({x:i.bg.displayWidth/2+0,y:i.bg.y+i.bg.displayHeight/2+-35});return i.additionalTryButton=new v(e,o,n,c),i}return w(e,t),e.prototype.update=function(){},e.prototype.remove=function(){this.bg.destroy(),this.header.destroy(),this.headerScore.destroy(),this.homeButton.remove(),this.reloadButton.remove(),this.additionalTryButton.remove()},e}(b),E=function(){var t=function(e,o){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},t(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),H=function(t){function e(e,o,n){var i=t.call(this,e,o,n)||this;i.sprites=[];for(var a=0;a<o.playerHP;a++){var r=e.add.image(40+20*a,50,"ball");r.x-=r.displayWidth/2,r.setScale(.36,.36),i.sprites.push(r)}return i}return E(e,t),e.prototype.update=function(){this.gameState.playerHP>=0&&this.gameState.playerHP<this.globalConfig.PLAYER_MAX_HP&&(this.sprites[this.gameState.playerHP].active=!1,this.sprites[this.gameState.playerHP].visible=!1)},e.prototype.remove=function(){this.sprites.forEach((function(t){return t.destroy()})),this.sprites=[]},e}(b),D=function(){var t=function(e,o){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},t(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),L=function(t){function e(e,o,n){var i=t.call(this,e,o,n)||this;return i.score=e.add.text(Ot.VIEWPORT_WIDTH/2,30,"УРОВЕНЬ: ".concat(i.gameState.level),{fontFamily:"Rubik Wet Paint",fontSize:"30px"}),i.score.setOrigin(.5,0),i}return D(e,t),e.prototype.update=function(){this.score.text="УРОВЕНЬ: ".concat(this.gameState.level)},e.prototype.remove=function(){this.score.destroy()},e}(b),I=function(){var t=function(e,o){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},t(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),A=function(t){function e(e,o,n){var i=t.call(this,e,o,n)||this;return i.button=e.add.image(Ot.VIEWPORT_WIDTH/2,window.innerHeight/2,"startButton"),i.button.setScale(.6,.6),i.button.setInteractive({cursor:"pointer"}),i.button.on("pointerdown",function(){i.button.setTexture("startButtonPressed")}.bind(null,e)),i.button.on("pointerup",(function(){i.button.setTexture("startButton"),e.scene.start("gameScene")})),e.input.on("pointerup",function(){i.button.setTexture("startButton")}.bind(null,e)),i}return I(e,t),e.prototype.update=function(){},e.prototype.remove=function(){this.button.active=!1,this.button.visible=!1,this.button.destroy()},e}(b),B=function(){var t=function(e,o){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},t(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),R=function(t){function e(e,o,n){var i=t.call(this,e,o,n)||this;return i.score=e.add.text(n.VIEWPORT_WIDTH/2,90,"СЧЁТ: ".concat(i.gameState.playerScore),{fontFamily:"Rubik Wet Paint",fontSize:"20px"}),i.score.setOrigin(.5,.5),i}return B(e,t),e.prototype.update=function(){this.score.text="СЧЁТ: ".concat(this.gameState.playerScore)},e.prototype.remove=function(){this.score.destroy()},e}(b),W=function(){var t=function(e,o){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},t(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),C=function(t){function e(e,o,n,i){var a=t.call(this,e,o,n)||this,r=e.add.image(Ot.VIEWPORT_WIDTH+10,10,1===Ot.GENERAL_SOUND_VOLUME?"volumeEnabled":"volumeDisabled");return r.setOrigin(1,0),r.setScale(.6,.6),r.setInteractive({cursor:"pointer"}),r.on("pointerdown",(function(){1===Ot.GENERAL_SOUND_VOLUME&&r.setTexture("volumeEnabledPressed"),0===Ot.GENERAL_SOUND_VOLUME&&r.setTexture("volumeDisabledPressed")})),r.on("pointerup",(function(){if(1===Ot.GENERAL_SOUND_VOLUME)return r.setTexture("volumeDisabled"),void(Ot.GENERAL_SOUND_VOLUME=0);0===Ot.GENERAL_SOUND_VOLUME&&(r.setTexture("volumeEnabled"),Ot.GENERAL_SOUND_VOLUME=1)})),e.input.on("pointerup",(function(){1===Ot.GENERAL_SOUND_VOLUME&&r.setTexture("volumeEnabled"),0===Ot.GENERAL_SOUND_VOLUME&&r.setTexture("volumeDisabled")})),a}return W(e,t),e.prototype.update=function(){},e.prototype.remove=function(){this.button.destroy()},e}(b),V=function(){var t=function(e,o){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},t(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),M=function(t){function e(e,o,n,i){var a=t.call(this,e,o,n)||this;return a.button=e.add.image(i.x||0,i.y||0,"playButton"),a.button.x-=a.button.displayWidth/4,a.button.setScale(.36,.36),a.button.setInteractive({cursor:"pointer"}),a.button.on("pointerdown",(function(){a.button.setTexture("playButtonPressed")})),a.button.on("pointerup",(function(){a.button.setTexture("playButton"),a.gameState.stateTransition("LVL_PASSED","BALL_ATTACHED_TO_PLATFROM")})),e.input.on("pointerup",(function(){a.button.setTexture("playButton")})),a}return V(e,t),e.prototype.update=function(){},e.prototype.remove=function(){this.button.destroy()},e}(b),N=function(){var t=function(e,o){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},t(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),F=function(t){function e(e,o,n){var i=t.call(this,e,o,n)||this,a=Ot.VIEWPORT_HEIGHT/1.5;i.bg=e.add.image(0,0,"gameoverBg"),i.bg.displayWidth=Ot.VIEWPORT_WIDTH-20,i.bg.displayHeight=Ot.VIEWPORT_HEIGHT-a,i.bg.x=n.VIEWPORT_WIDTH/2,i.bg.y=n.VIEWPORT_HEIGHT/2;var r="Уровень пройден!",s=1.3*(i.bg.displayWidth-20)/r.length;i.header=e.add.text(i.bg.displayWidth/2+10,i.bg.y-i.bg.displayHeight/2+s+25,r,{fontFamily:"Rubik Wet Paint",fontSize:"".concat(s,"px")}),i.header.setOrigin(.5,.5),i.headerScore=e.add.text(i.bg.displayWidth/2+10,i.bg.y-i.bg.displayHeight/2+s+20+25+20,"Очков: ".concat(o.playerScore),{fontFamily:"Rubik Wet Paint",fontSize:"".concat(20,"px")}),i.headerScore.setOrigin(.5,.5),i.headerScore.displayWidth=i.headerScore.displayWidth-10;var l=(new Phaser.Math.Vector2).setFromObject({x:i.bg.displayWidth/2+70,y:i.bg.y+i.bg.displayHeight/4});return i.playButton=new M(e,o,n,l),i}return N(e,t),e.prototype.update=function(){},e.prototype.remove=function(){this.bg.active=!1,this.bg.visible=!1,this.bg.destroy(),this.header.active=!1,this.header.visible=!1,this.header.destroy(),this.headerScore.active=!1,this.headerScore.visible=!1,this.headerScore.destroy(),this.playButton.remove()},e}(b),j=function(){function t(t,e,o){this.sceneRef=t,this.gameState=e,this.globalConfig=o}return t.prototype.createPlayerScoreText=function(){this.playScoreText=new R(this.sceneRef,this.gameState,this.globalConfig)},t.prototype.createLevelText=function(){this.levelScoreText=new L(this.sceneRef,this.gameState,this.globalConfig)},t.prototype.createSoundToggleButton=function(){this.soundToggleButton=new C(this.sceneRef,this.gameState,this.globalConfig)},t.prototype.createPlayButton=function(){this.playButton=new A(this.sceneRef,this.gameState,this.globalConfig)},t.prototype.createHPBar=function(){this.hpBar=new H(this.sceneRef,this.gameState,this.globalConfig)},t.prototype.destroyHPBar=function(){this.hpBar.remove(),this.hpBar=null},t.prototype.createGameOverPanel=function(){this.gameOverPanel=new x(this.sceneRef,this.gameState,this.globalConfig)},t.prototype.createWinPanel=function(){this.winPanel=new F(this.sceneRef,this.gameState,this.globalConfig)},t.prototype.destroyGameOverPanel=function(){this.gameOverPanel.remove(),this.gameOverPanel=null},t.prototype.destroyWinPanel=function(){this.winPanel.remove(),this.winPanel=null},t.prototype.updateAll=function(){var t,e,o;null===(t=this.playScoreText)||void 0===t||t.update(),null===(e=this.levelScoreText)||void 0===e||e.update(),null===(o=this.hpBar)||void 0===o||o.update()},t}(),G=function(){var t=function(e,o){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},t(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),U=function(t){function e(){var e=t.call(this,{key:"menuScene"})||this;return e.lastBallPosition=new Phaser.Math.Vector2,e}return G(e,t),e.prototype.preload=function(){this.load.setBaseURL("images/"),this.load.image("startButton","start-button.png"),this.load.image("startButtonPressed","start-button-pressed.png"),this.load.image("volumeEnabled","volume-enabled.png"),this.load.image("volumeEnabledPressed","volume-enabled-pressed.png"),this.load.image("volumeDisabled","volume-disabled.png"),this.load.image("volumeDisabledPressed","volume-disabled-pressed.png"),this.load.image("bg","bg.png")},e.prototype.create=function(){var t=this.add.image(0,0,"bgNoLogo");t.setOrigin(0,0),t.displayWidth=Ot.VIEWPORT_WIDTH,this.uiData=new j(this,null,Ot),this.uiData.createPlayButton(),this.uiData.createSoundToggleButton(),this.add.image(Ot.VIEWPORT_WIDTH/2,Ot.VIEWPORT_HEIGHT-30,"platform"),this.ball=this.add.image(Ot.VIEWPORT_WIDTH/2,Ot.VIEWPORT_HEIGHT-60,"ball"),this.ballFollow=this.add.image(Ot.VIEWPORT_WIDTH/2,Ot.VIEWPORT_HEIGHT-60,"ballFollow"),this.ballFollow.setOrigin(0,.5),this.ballFollow.rotation=Math.PI/2,this.lastBallPosition.x=this.ball.x,this.lastBallPosition.y=this.ball.y,this.tweens.add({targets:this.ball,y:Ot.VIEWPORT_HEIGHT-300,duration:1e3,ease:"Power2",yoyo:!0,repeat:-1})},e.prototype.update=function(t,e){var o=this.ball.y-this.lastBallPosition.y;this.ballFollow.x=this.ball.x,this.ballFollow.y=this.ball.y,this.lastBallDiffY<0&&o>0&&this.tweens.add({targets:this.ballFollow,scale:{from:1,to:-1},duration:200,ease:"Power2",delay:200}),this.lastBallDiffY>0&&o<0&&this.tweens.add({targets:this.ballFollow,scale:{from:-1,to:1},duration:200,ease:"Power2"}),this.lastBallPosition.y=this.ball.y,this.lastBallDiffY=o},e}(Phaser.Scene),k=function(t){var e;this.scale=new Phaser.Math.Vector2(1,1),this.position=new Phaser.Math.Vector2(0,0),this.direction=new Phaser.Math.Vector2(0,0),this.rotation=0,this.sprite=t,this.geometryBounds=null===(e=this.sprite)||void 0===e?void 0:e.getBounds()},z=function(){var t=function(e,o){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},t(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Y=function(t){function e(e){var o=t.call(this,e)||this;return o.speed=8,o}return z(e,t),e}(k),X=function(){var t=function(e,o){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},t(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Z=function(t){function e(e){return t.call(this,e)||this}return X(e,t),e}(k),q=function(){var t=function(e,o){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},t(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),J=function(t){function e(e){var o=t.call(this,e)||this;return o.name="",o.name=o.getRandomImageName(),o}return q(e,t),e.prototype.getRandomImageName=function(){return Math.random(),"box-orange"},e}(k),K=function(){var t=function(e,o){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},t(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Q=function(t){function e(e){var o=t.call(this,e)||this;return o.speed=.1,o.reflectionLastFrame=!1,o}return K(e,t),e}(k),$=function(){var t=function(e,o){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},t(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),tt=function(t){function e(e){return t.call(this,e)||this}return $(e,t),e}(k),et=function(){var t=function(e,o){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},t(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),ot=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return et(e,t),e}(k),nt=function(){var t=function(e,o){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},t(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),it=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return nt(e,t),e}(k),at=function(){var t=function(e,o){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},t(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),rt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return at(e,t),e}(k),st=function(){var t=function(e,o){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},t(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),lt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return st(e,t),e}(k),ut=function(){function t(t,e,o,n){this.inputData=t,this.vfxData=o,this.sfxData=n,this.gameState=e,this.initializeStateTransitionCallbacks()}return t.prototype.initializeStateTransitionCallbacks=function(){var t=this;this.gameState.stateTransitionCallbacks.push((function(e,o){"BALL_ATTACHED_TO_PLATFROM"===e&&"RUNNING"===o&&t.gameState.ball.direction.set(0,-1).normalize()})),this.gameState.stateTransitionCallbacks.push((function(e,o){"LVL_PASSED"===e&&"BALL_ATTACHED_TO_PLATFROM"===o&&(t.gameState.level+=1)}))},t.prototype.lvlPassed=function(){return"RUNNING"===this.gameState.stateId&&this.gameState.boxes.length<1},t.prototype.processLogic=function(t){var e=this;if("RUNNING"===this.gameState.stateId&&(this.gameState.lvlRunningTime+=t),this.lvlPassed()&&"RUNNING"===this.gameState.stateId){this.gameState.stateTransition("RUNNING","LVL_PASSED");var o=new k(null);return this.sfxData.sfxLVLCompleteData.push(o),void(this.gameState.lvlRunningTime=0)}if("LVL_PASSED"!==this.gameState.stateId){var n=Math.min(Phaser.Math.Clamp(Math.ceil(this.gameState.ball.speed*Ot.VIEWPORT_HEIGHT/1080+(4e-4*this.gameState.lvlRunningTime+1.4*this.gameState.level*1e-4)),Ot.BALL_BASE_SPEED,Math.ceil(Ot.BALL_BASE_SPEED+1.4*this.gameState.level)),Ot.BALL_MAX_SPEED);this.gameState.ball.position.add(this.gameState.ball.direction.normalize().multiply(new Phaser.Math.Vector2(n,n)));var i=this.gameState.platform.sprite.displayWidth,a=this.gameState.platform.sprite.displayHeight,r=(this.gameState.ball.sprite.displayWidth,this.gameState.ball.sprite.displayHeight);if("BALL_ATTACHED_TO_PLATFROM"===this.gameState.stateId&&(this.gameState.platform.position.x=this.inputData.mousePosition.x,this.gameState.platform.position.x=Phaser.Math.Clamp(this.gameState.platform.position.x,i/2,Ot.VIEWPORT_WIDTH-i/2),this.gameState.ball.position.x=this.gameState.platform.position.x,this.gameState.ball.position.y=this.gameState.platform.position.y-a/2-r/2),"RUNNING"===this.gameState.stateId){if(this.gameState.ball.position.y-r>Ot.VIEWPORT_HEIGHT)return this.gameState.playerHP-=1,o=new k(null),this.sfxData.sfxLoseData.push(o),0===this.gameState.playerHP?(this.gameState.stateTransition("RUNNING","GAME_OVER"),void(this.gameState.lvlRunningTime=0)):(this.gameState.stateTransition("RUNNING","BALL_ATTACHED_TO_PLATFROM"),void(this.gameState.ball.direction=new Phaser.Math.Vector2(0,0)));this.gameState.platform.position.x=this.inputData.mousePosition.x,this.gameState.platform.position.x=Phaser.Math.Clamp(this.gameState.platform.position.x,i/2,Ot.VIEWPORT_WIDTH-i/2);var s=!1;this.gameState.boxes.forEach((function(t){s||(s=e.calculateNewBallDirectionAfterCollision(t,!1,!1,!0))})),this.gameState.boxes=this.gameState.boxes.filter((function(t){return!!t.sprite.active||(t.sprite.active?void 0:(t.sprite.destroy(),!1))})),this.calculateNewBallDirectionAfterCollision(this.gameState.platform,!0,!0),this.calculateNewBallDirectionAfterCollision(this.gameState.topSceneBound,!0,!1,!1,!1,!1,!0),this.calculateNewBallDirectionAfterCollision(this.gameState.leftSceneBound,!0,!1,!1,!0),this.calculateNewBallDirectionAfterCollision(this.gameState.rightSceneBound,!0,!1,!1,!1,!0)}}},t.prototype.calculateNewBallDirectionAfterCollision=function(t,e,o,n,i,a,r){var s=Phaser.Geom.Rectangle.Clone(this.gameState.ball.sprite.getBounds()),l=Phaser.Geom.Rectangle.Clone(t.sprite.getBounds());if(s.x+=this.gameState.ball.direction.x,s.y+=this.gameState.ball.direction.y,Phaser.Geom.Rectangle.Overlaps(s,l)&&t.sprite.active){var u=Phaser.Geom.Rectangle.Intersection(s,l);t.sprite.visible=e,t.sprite.active=e;var c=Phaser.Geom.Line.GetNormal(this.getClosestLineToBallToCalculateReflection(u)),p=new Phaser.Math.Vector2(c.x,c.y).normalize();if(o&&!this.gameState.platformCollidedLastFrame){(f=new rt(null)).position=t.position.clone(),f.position.x=t.position.x+t.sprite.displayWidth/2,f.position.y=t.position.y+ +t.sprite.displayHeight/2,this.vfxData.particlesPlatformOnHit.push(f);var h=new lt(null);return this.sfxData.sfxPlatformCollisionData.push(h),this.clampBallPositionAfterCollisionLeftOrRightPlatformSide(p),this.gameState.platformCollidedLastFrame=!0,this.calculateDirVectorAfterCollisionWithPlatfrom(p),!0}if(!o){if(this.gameState.platformCollidedLastFrame=!1,this.gameState.ball.direction.reflect(p),n){var f;(f=new rt(null)).position=t.position.clone(),f.position.x=t.position.x+t.sprite.displayWidth/2,f.position.y=t.position.y+ +t.sprite.displayHeight/2,h=new ot(null),this.sfxData.sfxBoxCollisionData.push(h);var d=new it(t.sprite);d.position=f.position.clone(),this.vfxData.boxFadeInOnHit.push(d),this.vfxData.particlesBoxOnHit.push(f),this.gameState.playerScore+=Math.ceil(60+1.4*this.gameState.level)}var y=this.gameState.ball.position.x,g=this.gameState.ball.position.y,m=this.gameState.ball.sprite.displayWidth,b=this.gameState.ball.sprite.displayHeight;if(i&&y-m/2<=0&&(this.gameState.ball.position.x=m/2),a&&y+m/2>=Ot.VIEWPORT_WIDTH&&(this.gameState.ball.position.x=Ot.VIEWPORT_WIDTH-m/2),r){var _=this.gameState.topSceneBound.sprite.y+this.gameState.topSceneBound.sprite.displayHeight/2;g-b/2<=_&&(this.gameState.ball.position.y=_+this.gameState.ball.sprite.displayHeight/2)}}return!0}return!1},t.prototype.getClosestLineToBallToCalculateReflection=function(t){var e=Phaser.Geom.Line.Length(t.getLineA())>Phaser.Geom.Line.Length(t.getLineB())?t.getLineA():t.getLineB(),o=Phaser.Geom.Line.Length(t.getLineC())>Phaser.Geom.Line.Length(t.getLineD())?t.getLineC():t.getLineD(),n=Phaser.Geom.Line.GetMidPoint(e),i=Phaser.Geom.Line.GetMidPoint(o),a=new Phaser.Math.Vector2(n.x,n.y),r=new Phaser.Math.Vector2(i.x,i.y),s=a.subtract(this.gameState.ball.position),l=r.subtract(this.gameState.ball.position);return s.length()<l.length()?e:o},t.prototype.clampBallPositionAfterCollisionLeftOrRightPlatformSide=function(t){var e=Phaser.Math.Vector2.LEFT,o=Phaser.Math.Vector2.RIGHT;0===e.cross(t)&&(this.gameState.ball.position.x=this.gameState.platform.position.x-this.gameState.platform.sprite.displayWidth/2-this.gameState.ball.sprite.displayWidth/2),0===o.cross(t)&&(this.gameState.ball.position.x=this.gameState.platform.position.x+this.gameState.platform.sprite.displayWidth/2+this.gameState.ball.sprite.displayWidth/2)},t.prototype.calculateDirVectorAfterCollisionWithPlatfrom=function(t){var e,o,n=this.gameState.ball.position.x,i=this.gameState.platform.sprite.displayWidth,a=(n-(this.gameState.platform.position.x-i/2))/i,r=(void 0===(e=-1)&&(e=0),void 0===(o=1)&&(o=1),e+(Phaser.Math.Clamp(a,0,1)-0)/1*(o-e)),s=Math.PI/4;if(t.cross(Phaser.Math.Vector2.UP)-.01<=0){var l=s*r,u=Phaser.Math.Vector2.UP.clone();return u.rotate(l),void(this.gameState.ball.direction=u)}this.gameState.ball.direction.reflect(t)},t}(),ct=function(){function t(){this.boxes=[],this.playerHP=3,this.playerScore=0,this.level=1,this.stateId="NOT_STARTED",this.platformCollidedLastFrame=!1,this.lvlRunningTime=0,this.stateTransitionCallbacks=[]}return t.prototype.stateTransition=function(t,e){e!==this.stateId&&(this.stateId=e,this.stateTransitionCallbacks.forEach((function(o){return o(t,e)})))},t}(),pt=function(){this.mousePosition=new Phaser.Math.Vector2(0,0),this.mouseDirection=new Phaser.Math.Vector2(0,0),this.mouseFrameDiff=new Phaser.Math.Vector2(0,0)},ht=function(){function t(t,e,o){this.sfxBoxCollisionData=[],this.sfxPlatformCollisionData=[],this.sfxLoseData=[],this.sfxLVLCompleteData=[],this.sceneRef=t,this.gameState=e,this.globalConfig=o,this.webAudioManager=new Phaser.Sound.WebAudioSoundManager(t.game),this.createOnBoxHit(),this.createOnPlatformHit(),this.createOnLvlComplete(),this.createOnLose()}return t.prototype.createOnBoxHit=function(){this.soundOnBoxHit=this.webAudioManager.add("boxBreakSound")},t.prototype.createOnPlatformHit=function(){this.soundOnPlatformHit=this.webAudioManager.add("platformBallCollision")},t.prototype.createOnLose=function(){this.soundOnLose=this.webAudioManager.add("lose")},t.prototype.createOnLvlComplete=function(){this.soundOnLVLComplete=this.webAudioManager.add("lvlComplete")},t.prototype.playOnBoxHit=function(){this.soundOnBoxHit.volume=this.globalConfig.GENERAL_SOUND_VOLUME,this.soundOnBoxHit.play()},t.prototype.playOnOnPlatformHit=function(){this.soundOnPlatformHit.volume=this.globalConfig.GENERAL_SOUND_VOLUME,this.soundOnPlatformHit.play()},t.prototype.playOnLose=function(){this.soundOnLose.volume=Phaser.Math.Clamp(this.globalConfig.GENERAL_SOUND_VOLUME-.6,0,1),this.soundOnLose.play()},t.prototype.playOnOnLvlComplete=function(){this.soundOnLVLComplete.volume=Phaser.Math.Clamp(this.globalConfig.GENERAL_SOUND_VOLUME-.6,0,1),this.soundOnLVLComplete.play()},t.prototype.playAll=function(){var t=this;this.sfxBoxCollisionData.forEach((function(){t.playOnBoxHit()})),this.sfxBoxCollisionData=[],this.sfxPlatformCollisionData.forEach((function(){t.playOnOnPlatformHit()})),this.sfxPlatformCollisionData=[],this.sfxLoseData.forEach((function(){t.playOnLose()})),this.sfxLoseData=[],this.sfxLVLCompleteData.forEach((function(){t.playOnOnLvlComplete()})),this.sfxLVLCompleteData=[]},t}(),ft=function(){function t(t,e,o){this.particlesBoxOnHit=[],this.particlesPlatformOnHit=[],this.boxFadeInOnHit=[],this.sceneRef=t,this.gameState=e,this.globalConfig=o,this.bottomLayer=this.sceneRef.add.layer(),this.topLayer=this.sceneRef.add.layer(),this.createOnBoxHitParticles()}return t.prototype.createOnBoxHitParticles=function(){var t=this.sceneRef.add.particles("particleAtlas");this.particlesOnBoxHit=t.createEmitter({frame:["orange","blue","green","yellow","violet"],x:400,y:300,speed:300,lifespan:220,alpha:{start:1,end:.4},scale:{start:1,end:.2},gravityY:1600,active:!1}),this.topLayer.add(t)},t.prototype.spawnBoxHitParticles=function(t){this.particlesOnBoxHit.active=!0,this.particlesOnBoxHit.explode(13,t.x,t.y)},t.prototype.spawnBoxFadeIn=function(t,e){var o=this.sceneRef.add.image(t.x,t.y,"boxAtlas",e);this.bottomLayer.add(o),this.sceneRef.tweens.add({targets:o,scaleX:{from:1,to:1.4},scaleY:{from:1,to:1.4},alpha:.2,duration:150,onComplete:function(){o.destroy()}})},t.prototype.drawAll=function(){var t=this;this.particlesPlatformOnHit.forEach((function(t){})),this.particlesPlatformOnHit=[],this.boxFadeInOnHit.forEach((function(e){t.spawnBoxFadeIn(e.position,e.sprite.frame.name)})),this.boxFadeInOnHit=[],this.particlesBoxOnHit.forEach((function(e){t.spawnBoxHitParticles(e.position)})),this.particlesBoxOnHit=[]},t}(),dt=function(){var t=function(e,o){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},t(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),yt=function(t){function e(){return t.call(this,{key:"gameScene"})||this}return dt(e,t),e.prototype.initializeSceneInput=function(){var t=this;this.inputData=new pt,this.input.keyboard.on("keydown",(function(e){"w"===e.key&&(t.inputData.keysPressed.w=!0),"a"===e.key&&(t.inputData.keysPressed.a=!0),"s"===e.key&&(t.inputData.keysPressed.s=!0),"d"===e.key&&(t.inputData.keysPressed.d=!0)})),this.input.keyboard.on("keyup",(function(e){"w"===e.key&&(t.inputData.keysPressed.w=!1),"a"===e.key&&(t.inputData.keysPressed.a=!1),"s"===e.key&&(t.inputData.keysPressed.s=!1),"d"===e.key&&(t.inputData.keysPressed.d=!1)})),this.input.keyboard.on("keyup",(function(e){if(" "===e.key){if("GAME_OVER"===t.gameState.stateId)return;t.gameState.stateTransition("BALL_ATTACHED_TO_PLATFROM","RUNNING")}})),this.input.on("pointerdown",(function(e){if(0===e.event.button||e.wasTouch){if("GAME_OVER"===t.gameState.stateId)return;if("LVL_PASSED"===t.gameState.stateId)return;t.gameState.stateTransition("BALL_ATTACHED_TO_PLATFROM","RUNNING")}})),this.input.on("pointermove",(function(e){t.inputData.mouseDirection.x=Math.sign(e.x-t.inputData.mousePosition.x),t.inputData.mouseDirection.y=Math.sign(e.y-t.inputData.mousePosition.y),t.inputData.mousePosition.x=e.x,t.inputData.mousePosition.y=e.y}))},e.prototype.preload=function(){this.load.setBaseURL("sound/"),this.load.audio("boxBreakSound","box-break.ogg"),this.load.audio("platformBallCollision","platform-ball-collision.ogg")},e.prototype.create=function(){var t=this;this.initializeSceneInput(),this.gameState=new ct,this.createInitialState(),this.vfxData=new ft(this,this.gameState,Ot),this.soundData=new ht(this,this.gameState,Ot),this.gameLogic=new ut(this.inputData,this.gameState,this.vfxData,this.soundData),this.gameState.stateTransition("NOT_STARTED","BALL_ATTACHED_TO_PLATFROM"),this.uiData=new j(this,this.gameState,Ot),this.uiData.createPlayerScoreText(),this.uiData.createHPBar(),this.uiData.createLevelText(),this.uiData.createSoundToggleButton(),this.gameState.stateTransitionCallbacks.push((function(e,o){"RUNNING"===e&&"GAME_OVER"===o&&(t.uiData.destroyHPBar(),t.uiData.createGameOverPanel())})),this.gameState.stateTransitionCallbacks.push((function(e,o){"GAME_OVER"===e&&"BALL_ATTACHED_TO_PLATFROM"===o&&(t.uiData.createHPBar(),t.uiData.destroyGameOverPanel())})),this.gameState.stateTransitionCallbacks.push((function(e,o){"RUNNING"===e&&"LVL_PASSED"===o&&t.uiData.createWinPanel()})),this.gameState.stateTransitionCallbacks.push((function(e,o){"LVL_PASSED"===e&&"BALL_ATTACHED_TO_PLATFROM"===o&&(t.createBoxesField(),t.uiData.destroyWinPanel())}))},e.prototype.createInitialState=function(){var t=this.add.image(0,0,"bgNoLogo");t.setOrigin(0,0),t.displayWidth=Ot.VIEWPORT_WIDTH,this.createBoxesField();var e=this.add.image(0,0,"platform");e.setScale(.3,1),this.gameState.platform=new Q(e);var o={x:Ot.VIEWPORT_WIDTH/2,y:Ot.VIEWPORT_HEIGHT-e.displayHeight/2-20};e.x=o.x,e.y=o.y,this.gameState.platform.position.setFromObject(o);var n=this.add.image(0,0,"ball");n.setScale(.6,.6),this.gameState.ball=new Y(n),this.gameState.ballFollow=new Z(this.add.image(0,0,"ballFollow")),this.gameState.ballFollow.sprite.setOrigin(0,.5),this.gameState.ballFollow.rotation=Math.PI/2,this.gameState.ballFollow.sprite.setScale(.6,.6),this.gameState.ballFollow.position=this.gameState.ball.position.clone();var i={x:Ot.VIEWPORT_WIDTH/2,y:Ot.VIEWPORT_HEIGHT-n.displayHeight/2-20-e.displayHeight-5};n.x=i.x,n.y=i.y,this.gameState.ball.position.setFromObject(i);var a=this.make.renderTexture({width:10,height:Ot.VIEWPORT_HEIGHT,x:0,y:0}),r=this.add.image(-5,Ot.VIEWPORT_HEIGHT/2,a.texture);r.visible=!1,this.gameState.leftSceneBound=new tt(r);var s=this.make.renderTexture({width:10,height:Ot.VIEWPORT_HEIGHT,x:0,y:0}),l=this.add.image(Ot.VIEWPORT_WIDTH+5,Ot.VIEWPORT_HEIGHT/2,s.texture);this.gameState.rightSceneBound=new tt(l);var u=this.make.renderTexture({width:Ot.VIEWPORT_WIDTH,height:10,x:0,y:0}),c=this.add.image(Ot.VIEWPORT_WIDTH/2,110,u.texture);this.gameState.topSceneBound=new tt(c)},e.prototype.createBoxesField=function(){var t=this.add.image(0,0,"boxAtlas","block-orange");t.setScale(.5,.5),t.visible=!1;for(var e=(this.gameState.level-1)%5+1,o=Math.floor(Ot.VIEWPORT_WIDTH/(t.displayWidth+6)),n=3+Ot.VIEWPORT_WIDTH%(t.displayWidth+6)/2,i=0;i<e;i++)for(var a=0;a<o;a++){var r={x:n+(6+t.displayWidth)*a,y:190+(6+t.displayHeight)*i},s=this.add.image(r.x,r.y,"boxAtlas"),l=new J(s);s.setFrame(l.name),s.setScale(.5,.5),s.setOrigin(0,0),l.position.setFromObject(r),this.gameState.boxes.push(l)}},e.prototype.drawScene=function(t){var e=new Phaser.Math.Vector2(this.gameState.ball.position.x,this.gameState.ball.position.y),o=new Phaser.Math.Vector2(this.gameState.ball.sprite.x,this.gameState.ball.sprite.y);o.lerp(e,t/30),this.gameState.ball.sprite.setPosition(o.x,o.y),this.gameState.ballFollow.sprite.setPosition(o.x,o.y),"BALL_ATTACHED_TO_PLATFROM"===this.gameState.stateId?this.gameState.ballFollow.sprite.visible=!1:this.gameState.ballFollow.sprite.visible=!0,this.gameState.ballFollow.sprite.rotation=Phaser.Math.Angle.RotateTo(this.gameState.ballFollow.sprite.rotation,Phaser.Math.Angle.BetweenPoints(Phaser.Math.Vector2.DOWN,this.gameState.ball.direction.clone().negate()),t/30);var n=new Phaser.Math.Vector2(this.gameState.platform.position.x,this.gameState.platform.position.y),i=new Phaser.Math.Vector2(this.gameState.platform.sprite.x,this.gameState.platform.sprite.y);i.lerp(n,t/30),this.gameState.platform.sprite.setPosition(i.x,i.y),this.uiData.updateAll(),this.vfxData.drawAll(),this.soundData.playAll()},e.prototype.update=function(t,e){this.drawScene(e),this.gameLogic.processLogic(e)},e}(Phaser.Scene),gt=function(){function t(){}return t.prototype.initalize=function(t,e){YaGames.init().then((function(e){console.log("Yandex SDK initialized"),window.ysdk=e,t(e)})).catch((function(t){console.log(t),e(t)}))},t}(),mt=function(){var t=function(e,o){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},t(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),bt=function(t){function e(){return t.call(this,{key:"loadScene"})||this}return mt(e,t),e.prototype.preload=function(){var t=this;this.load.atlas("boxAtlas","images/box-atlas.png","images/box-atlas_atlas.json"),this.load.atlas("particleAtlas","images/particle-atlas.png","images/particle-atlas_atlas.json"),this.load.image("ball","images/ball.png"),this.load.image("ballFollow","images/follow-ball.png"),this.load.image("platform","images/platform.png"),this.load.image("startButton","images/start-button.png"),this.load.image("startButtonPressed","images/start-button-pressed.png"),this.load.image("volumeEnabled","images/volume-enabled.png"),this.load.image("volumeEnabledPressed","images/volume-enabled-pressed.png"),this.load.image("volumeDisabled","images/volume-disabled.png"),this.load.image("volumeDisabledPressed","images/volume-disabled-pressed.png"),this.load.image("bg","images/bg.png"),this.load.image("bgNoLogo","images/bg-no-logo.png"),this.load.image("gameoverBg","images/gameover-bg.png"),this.load.image("reloadButton","images/reload-button.png"),this.load.image("reloadButtonPressed","images/reload-button-pressed.png"),this.load.image("homeButton","images/home-button.png"),this.load.image("homeButtonPressed","images/home-button-pressed.png"),this.load.image("playButton","images/play.png"),this.load.image("playButtonPressed","images/play-pressed.png"),this.load.image("additionalHPButton","images/additional-hp-button.png"),this.load.image("additionalHPButtonPressed","images/additional-hp-button-pressed.png"),this.load.audio("boxBreakSound","sound/box-break.ogg"),this.load.audio("platformBallCollision","sound/platform-ball-collision.ogg"),this.load.audio("lose","sound/lose.ogg"),this.load.audio("lvlComplete","sound/lvl-complete.ogg"),this.load.on("complete",(function(){(new gt).initalize((function(){t.scene.start("menuScene")}),(function(){}))}))},e}(Phaser.Scene),_t=window.innerWidth,vt=window.innerHeight,Ot=(Math.min(_t,vt),{VIEWPORT_WIDTH:Math.min(vt*(9/16),_t),VIEWPORT_HEIGHT:vt,GENERAL_SOUND_VOLUME:1,PLAYER_MAX_HP:3,BALL_BASE_SPEED:6,BALL_MAX_SPEED:20}),Pt={width:Ot.VIEWPORT_WIDTH,height:Ot.VIEWPORT_HEIGHT,scale:{mode:Phaser.Scale.NONE},type:Phaser.WEBGL,canvas:document.getElementById("app"),scene:[bt,U,yt]};new Phaser.Game(Pt)}},t=>{t(t.s=27686)}]);