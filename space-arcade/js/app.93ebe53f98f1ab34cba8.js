/*! For license information please see app.93ebe53f98f1ab34cba8.js.LICENSE.txt */
"use strict";(self.webpackChunktjs_webpack=self.webpackChunktjs_webpack||[]).push([[143],{681:(e,t,n)=>{n.d(t,{Z:()=>a});var o=n(81),r=n.n(o),i=n(645),s=n.n(i)()(r());s.push([e.id,".app{width:100%;height:100%;position:absolute;left:0;top:0}.app>.app__overlay{position:absolute;width:var(--canvas-aspect-ratio-width);height:var(--canvas-aspect-ratio-height);left:50%;top:50%;transform:translate(-50%, -50%)}.app>.app__overlay.loading{width:100%;height:100%}",""]);const a=s},343:(e,t,n)=>{n.d(t,{Z:()=>a});var o=n(81),r=n.n(o),i=n(645),s=n.n(i)()(r());s.push([e.id,".gameover-screen{width:100%;height:100%;position:relative;background:rgba(0,0,0,.4)}.gameover-screen__image-text{left:50%;top:40%;position:absolute;transform:translate(-50%, -50%)}.gameover-screen__image-text img{width:100%}@media screen and (max-width: 1024px){.gameover-screen__image-text{max-width:200px}}@media screen and (max-width: 768px){.gameover-screen__image-text{max-width:150px}}.gameover-screen__reload-button{left:50%;top:60%;position:absolute;transform:translate(-50%, -50%);width:100px;height:100px}@media screen and (max-width: 1024px){.gameover-screen__reload-button{width:50px;height:50px;top:65%}.gameover-screen__reload-button .app-button{border-width:3px;border-radius:10px}}@media screen and (max-width: 768px){.gameover-screen__reload-button{width:32px;height:32px;top:65%}.gameover-screen__reload-button .app-button{border-width:2px;border-radius:5px}}.gameover-screen__reload-image{width:60px}@media screen and (max-width: 1024px){.gameover-screen__reload-image{width:30px}}@media screen and (max-width: 768px){.gameover-screen__reload-image{width:20px}}",""]);const a=s},883:(e,t,n)=>{n.d(t,{Z:()=>a});var o=n(81),r=n.n(o),i=n(645),s=n.n(i)()(r());s.push([e.id,".hud{width:100%;height:100%;position:relative}.hud>.sound-toggle{width:90px;height:90px}@media screen and (max-width: 1024px){.hud>.tries,.hud .score,.hud .sound-toggle{border-width:3px}.hud>.tries .state-info__value,.hud .score .state-info__value,.hud .sound-toggle .state-info__value{font-size:16px}.hud>.tries .state-info__image{width:40px}.hud>.score{left:120px}.hud>.score .state-info__image{width:20px}.hud>.sound-toggle{width:60px;height:60px;padding:10px;border-radius:10px}}@media screen and (max-width: 768px){.hud>.sound-toggle{width:40px;height:40px;padding:5px;border-radius:8px;top:5px;right:5px}}.sound-toggle{position:absolute;right:10px;top:10px;width:50px}.sound-toggle img{width:100%}.tries{position:absolute;left:-2px;top:0px}.tries .state-info__image{width:68px}.score{position:absolute;left:180px;top:0px}.score .state-info__image{width:40px}",""]);const a=s},238:(e,t,n)=>{n.d(t,{Z:()=>a});var o=n(81),r=n.n(o),i=n(645),s=n.n(i)()(r());s.push([e.id,".state-info[data-v-523b9fdf]{border:6px solid #ffff83;padding:10px 15px;background-color:#33f;font-size:16px;white-space:nowrap;border-left-style:hidden;border-top-style:hidden;border-right-style:hidden;border-bottom-style:hidden;color:#fff;display:flex;flex-flow:row nowrap;align-items:center;justify-content:space-between}.state-info.border-left[data-v-523b9fdf]{border-left-style:solid}.state-info.border-right[data-v-523b9fdf]{border-right-style:solid}.state-info.border-top[data-v-523b9fdf]{border-top-style:solid}.state-info.border-bottom[data-v-523b9fdf]{border-bottom-style:solid}.state-info.border-bottom-left-radius[data-v-523b9fdf]{border-bottom-left-radius:20px}.state-info.border-bottom-right-radius[data-v-523b9fdf]{border-bottom-right-radius:20px}.state-info.border-top-left-radius[data-v-523b9fdf]{border-top-left-radius:20px}.state-info.border-top-right-radius[data-v-523b9fdf]{border-top-right-radius:20px}.state-info__value[data-v-523b9fdf]{margin:0px 0px 0px 15px;font-weight:700;font-size:30px}",""]);const a=s},403:(e,t,n)=>{n.d(t,{Z:()=>a});var o=n(81),r=n.n(o),i=n(645),s=n.n(i)()(r());s.push([e.id,".loading-screen{position:absolute;left:0;top:0;background:#000}.loading-screen .loading-progress{left:50%;top:50%;transform:translate(-50%, -50%);position:absolute}",""]);const a=s},5:(e,t,n)=>{n.d(t,{Z:()=>a});var o=n(81),r=n.n(o),i=n(645),s=n.n(i)()(r());s.push([e.id,".pause-screen{width:100%;height:100%;position:relative;background:rgba(0,0,0,.4)}.pause-screen__image-text{left:50%;top:40%;position:absolute;transform:translate(-50%, -50%)}.pause-screen__image-text img{width:100%}@media screen and (max-width: 1024px){.pause-screen__image-text{max-width:200px}}@media screen and (max-width: 768px){.pause-screen__image-text{max-width:100px}}.pause-screen__pause-button{left:50%;top:55%;position:absolute;transform:translate(-50%, -50%)}@media screen and (max-width: 1024px){.pause-screen__pause-button{width:42px;height:50px;top:65%}.pause-screen__pause-button .app-button{border-width:3px;border-radius:10px}}@media screen and (max-width: 768px){.pause-screen__pause-button{width:32px;height:40px;top:65%}.pause-screen__pause-button .app-button{border-width:2px;border-radius:5px}}.pause-screen__pause-image{width:40px;height:55px}@media screen and (max-width: 1024px){.pause-screen__pause-image{width:30px;height:35px}}@media screen and (max-width: 768px){.pause-screen__pause-image{width:25px;height:25px}}",""]);const a=s},195:(e,t,n)=>{n.d(t,{Z:()=>a});var o=n(81),r=n.n(o),i=n(645),s=n.n(i)()(r());s.push([e.id,".app-button[data-v-338c83ce]{cursor:pointer;border:6px solid #ffff83;border-radius:20px;padding:10px 15px;background-color:#33f;display:flex;flex-flow:row nowrap;align-items:center;justify-content:center;width:100%;height:100%}",""]);const a=s},923:(e,t,n)=>{n.d(t,{Z:()=>a});var o=n(81),r=n.n(o),i=n(645),s=n.n(i)()(r());s.push([e.id,"@keyframes pulse{0%{opacity:.4}100%{opacity:1}}.progress-bar{left:50%;top:50%;transform:translate(-50%, -50%);position:relative;width:200px;height:20px;border-radius:5px;overflow:hidden}.progress-bar__line-bg{position:absolute;left:0;top:0;height:100%;width:100%;background:rgba(255,255,255,.4)}.progress-bar__line{position:absolute;left:0;top:0;height:100%;width:10%;background:#fff;animation:pulse 1s infinite alternate}",""]);const a=s},754:(e,t,n)=>{n.d(t,{Z:()=>a});var o=n(81),r=n.n(o),i=n(645),s=n.n(i)()(r());s.push([e.id,".toggle-button-button[data-v-2b065be4]{cursor:pointer;border:6px solid #ffff83;border-radius:20px;padding:10px 15px;background-color:#33f;display:flex;flex-flow:row nowrap;align-items:center;justify-content:center;width:100%;height:100%}",""]);const a=s},645:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",o=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),o&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),o&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,o,r,i){"string"==typeof e&&(e=[[null,e,void 0]]);var s={};if(o)for(var a=0;a<this.length;a++){var l=this[a][0];null!=l&&(s[l]=!0)}for(var c=0;c<e.length;c++){var u=[].concat(e[c]);o&&s[u[0]]||(void 0!==i&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=i),n&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=n):u[2]=n),r&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=r):u[4]="".concat(r)),t.push(u))}},t}},81:e=>{e.exports=function(e){return e[1]}},379:e=>{var t=[];function n(e){for(var n=-1,o=0;o<t.length;o++)if(t[o].identifier===e){n=o;break}return n}function o(e,o){for(var i={},s=[],a=0;a<e.length;a++){var l=e[a],c=o.base?l[0]+o.base:l[0],u=i[c]||0,d="".concat(c," ").concat(u);i[c]=u+1;var p=n(d),h={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==p)t[p].references++,t[p].updater(h);else{var m=r(h,o);o.byIndex=a,t.splice(a,0,{identifier:d,updater:m,references:1})}s.push(d)}return s}function r(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,r){var i=o(e=e||[],r=r||{});return function(e){e=e||[];for(var s=0;s<i.length;s++){var a=n(i[s]);t[a].references--}for(var l=o(e,r),c=0;c<i.length;c++){var u=n(i[c]);0===t[u].references&&(t[u].updater(),t.splice(u,1))}i=l}}},569:e=>{var t={};e.exports=function(e,n){var o=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(n)}},216:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},565:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},795:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var o="";n.supports&&(o+="@supports (".concat(n.supports,") {")),n.media&&(o+="@media ".concat(n.media," {"));var r=void 0!==n.layer;r&&(o+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),o+=n.css,r&&(o+="}"),n.media&&(o+="}"),n.supports&&(o+="}");var i=n.sourceMap;i&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleTagTransform(o,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},589:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},14:(e,t,n)=>{var o=n(477);function r(e,t){if(t===o.WwZ)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),e;if(t===o.z$h||t===o.UlW){let n=e.getIndex();if(null===n){const t=[],o=e.getAttribute("position");if(void 0===o)return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e;for(let e=0;e<o.count;e++)t.push(e);e.setIndex(t),n=e.getIndex()}const r=n.count-2,i=[];if(t===o.z$h)for(let e=1;e<=r;e++)i.push(n.getX(0)),i.push(n.getX(e)),i.push(n.getX(e+1));else for(let e=0;e<r;e++)e%2==0?(i.push(n.getX(e)),i.push(n.getX(e+1)),i.push(n.getX(e+2))):(i.push(n.getX(e+2)),i.push(n.getX(e+1)),i.push(n.getX(e)));i.length/3!==r&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=e.clone();return s.setIndex(i),s.clearGroups(),s}return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",t),e}class i extends o.aNw{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register((function(e){return new d(e)})),this.register((function(e){return new x(e)})),this.register((function(e){return new y(e)})),this.register((function(e){return new _(e)})),this.register((function(e){return new h(e)})),this.register((function(e){return new m(e)})),this.register((function(e){return new f(e)})),this.register((function(e){return new g(e)})),this.register((function(e){return new u(e)})),this.register((function(e){return new v(e)})),this.register((function(e){return new p(e)})),this.register((function(e){return new b(e)})),this.register((function(e){return new w(e)})),this.register((function(e){return new l(e)})),this.register((function(e){return new A(e)})),this.register((function(e){return new T(e)}))}load(e,t,n,r){const i=this;let s;if(""!==this.resourcePath)s=this.resourcePath;else if(""!==this.path){const t=o.Zp0.extractUrlBase(e);s=o.Zp0.resolveURL(t,this.path)}else s=o.Zp0.extractUrlBase(e);this.manager.itemStart(e);const a=function(t){r?r(t):console.error(t),i.manager.itemError(e),i.manager.itemEnd(e)},l=new o.hH6(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,(function(n){try{i.parse(n,s,(function(n){t(n),i.manager.itemEnd(e)}),a)}catch(e){a(e)}}),n,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}unregister(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,n,o){let r;const i={},s={},l=new TextDecoder;if("string"==typeof e)r=JSON.parse(e);else if(e instanceof ArrayBuffer)if(l.decode(new Uint8Array(e,0,4))===S){try{i[a.KHR_BINARY_GLTF]=new E(e)}catch(e){return void(o&&o(e))}r=JSON.parse(i[a.KHR_BINARY_GLTF].content)}else r=JSON.parse(l.decode(e));else r=e;if(void 0===r.asset||r.asset.version[0]<2)return void(o&&o(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const u=new X(r,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});u.fileLoader.setRequestHeader(this.requestHeader);for(let e=0;e<this.pluginCallbacks.length;e++){const t=this.pluginCallbacks[e](u);t.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),s[t.name]=t,i[t.name]=!0}if(r.extensionsUsed)for(let e=0;e<r.extensionsUsed.length;++e){const t=r.extensionsUsed[e],n=r.extensionsRequired||[];switch(t){case a.KHR_MATERIALS_UNLIT:i[t]=new c;break;case a.KHR_DRACO_MESH_COMPRESSION:i[t]=new R(r,this.dracoLoader);break;case a.KHR_TEXTURE_TRANSFORM:i[t]=new M;break;case a.KHR_MESH_QUANTIZATION:i[t]=new L;break;default:n.indexOf(t)>=0&&void 0===s[t]&&console.warn('THREE.GLTFLoader: Unknown extension "'+t+'".')}}u.setExtensions(i),u.setPlugins(s),u.parse(n,o)}parseAsync(e,t){const n=this;return new Promise((function(o,r){n.parse(e,t,o,r)}))}}function s(){let e={};return{get:function(t){return e[t]},add:function(t,n){e[t]=n},remove:function(t){delete e[t]},removeAll:function(){e={}}}}const a={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class l{constructor(e){this.parser=e,this.name=a.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let n=0,o=t.length;n<o;n++){const o=t[n];o.extensions&&o.extensions[this.name]&&void 0!==o.extensions[this.name].light&&e._addNodeRef(this.cache,o.extensions[this.name].light)}}_loadLight(e){const t=this.parser,n="light:"+e;let r=t.cache.get(n);if(r)return r;const i=t.json,s=((i.extensions&&i.extensions[this.name]||{}).lights||[])[e];let a;const l=new o.Ilk(16777215);void 0!==s.color&&l.setRGB(s.color[0],s.color[1],s.color[2],o.GUF);const c=void 0!==s.range?s.range:0;switch(s.type){case"directional":a=new o.Ox3(l),a.target.position.set(0,0,-1),a.add(a.target);break;case"point":a=new o.cek(l),a.distance=c;break;case"spot":a=new o.PMe(l),a.distance=c,s.spot=s.spot||{},s.spot.innerConeAngle=void 0!==s.spot.innerConeAngle?s.spot.innerConeAngle:0,s.spot.outerConeAngle=void 0!==s.spot.outerConeAngle?s.spot.outerConeAngle:Math.PI/4,a.angle=s.spot.outerConeAngle,a.penumbra=1-s.spot.innerConeAngle/s.spot.outerConeAngle,a.target.position.set(0,0,-1),a.add(a.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+s.type)}return a.position.set(0,0,0),a.decay=2,j(a,s),void 0!==s.intensity&&(a.intensity=s.intensity),a.name=t.createUniqueName(s.name||"light_"+e),r=Promise.resolve(a),t.cache.add(n,r),r}getDependency(e,t){if("light"===e)return this._loadLight(t)}createNodeAttachment(e){const t=this,n=this.parser,o=n.json.nodes[e],r=(o.extensions&&o.extensions[this.name]||{}).light;return void 0===r?null:this._loadLight(r).then((function(e){return n._getNodeRef(t.cache,r,e)}))}}class c{constructor(){this.name=a.KHR_MATERIALS_UNLIT}getMaterialType(){return o.vBJ}extendParams(e,t,n){const r=[];e.color=new o.Ilk(1,1,1),e.opacity=1;const i=t.pbrMetallicRoughness;if(i){if(Array.isArray(i.baseColorFactor)){const t=i.baseColorFactor;e.color.setRGB(t[0],t[1],t[2],o.GUF),e.opacity=t[3]}void 0!==i.baseColorTexture&&r.push(n.assignTexture(e,"map",i.baseColorTexture,o.KI_))}return Promise.all(r)}}class u{constructor(e){this.parser=e,this.name=a.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const o=n.extensions[this.name].emissiveStrength;return void 0!==o&&(t.emissiveIntensity=o),Promise.resolve()}}class d{constructor(e){this.parser=e,this.name=a.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?o.EJi:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],s=r.extensions[this.name];if(void 0!==s.clearcoatFactor&&(t.clearcoat=s.clearcoatFactor),void 0!==s.clearcoatTexture&&i.push(n.assignTexture(t,"clearcoatMap",s.clearcoatTexture)),void 0!==s.clearcoatRoughnessFactor&&(t.clearcoatRoughness=s.clearcoatRoughnessFactor),void 0!==s.clearcoatRoughnessTexture&&i.push(n.assignTexture(t,"clearcoatRoughnessMap",s.clearcoatRoughnessTexture)),void 0!==s.clearcoatNormalTexture&&(i.push(n.assignTexture(t,"clearcoatNormalMap",s.clearcoatNormalTexture)),void 0!==s.clearcoatNormalTexture.scale)){const e=s.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new o.FM8(e,e)}return Promise.all(i)}}class p{constructor(e){this.parser=e,this.name=a.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?o.EJi:null}extendMaterialParams(e,t){const n=this.parser,o=n.json.materials[e];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const r=[],i=o.extensions[this.name];return void 0!==i.iridescenceFactor&&(t.iridescence=i.iridescenceFactor),void 0!==i.iridescenceTexture&&r.push(n.assignTexture(t,"iridescenceMap",i.iridescenceTexture)),void 0!==i.iridescenceIor&&(t.iridescenceIOR=i.iridescenceIor),void 0===t.iridescenceThicknessRange&&(t.iridescenceThicknessRange=[100,400]),void 0!==i.iridescenceThicknessMinimum&&(t.iridescenceThicknessRange[0]=i.iridescenceThicknessMinimum),void 0!==i.iridescenceThicknessMaximum&&(t.iridescenceThicknessRange[1]=i.iridescenceThicknessMaximum),void 0!==i.iridescenceThicknessTexture&&r.push(n.assignTexture(t,"iridescenceThicknessMap",i.iridescenceThicknessTexture)),Promise.all(r)}}class h{constructor(e){this.parser=e,this.name=a.KHR_MATERIALS_SHEEN}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?o.EJi:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[];t.sheenColor=new o.Ilk(0,0,0),t.sheenRoughness=0,t.sheen=1;const s=r.extensions[this.name];if(void 0!==s.sheenColorFactor){const e=s.sheenColorFactor;t.sheenColor.setRGB(e[0],e[1],e[2],o.GUF)}return void 0!==s.sheenRoughnessFactor&&(t.sheenRoughness=s.sheenRoughnessFactor),void 0!==s.sheenColorTexture&&i.push(n.assignTexture(t,"sheenColorMap",s.sheenColorTexture,o.KI_)),void 0!==s.sheenRoughnessTexture&&i.push(n.assignTexture(t,"sheenRoughnessMap",s.sheenRoughnessTexture)),Promise.all(i)}}class m{constructor(e){this.parser=e,this.name=a.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?o.EJi:null}extendMaterialParams(e,t){const n=this.parser,o=n.json.materials[e];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const r=[],i=o.extensions[this.name];return void 0!==i.transmissionFactor&&(t.transmission=i.transmissionFactor),void 0!==i.transmissionTexture&&r.push(n.assignTexture(t,"transmissionMap",i.transmissionTexture)),Promise.all(r)}}class f{constructor(e){this.parser=e,this.name=a.KHR_MATERIALS_VOLUME}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?o.EJi:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],s=r.extensions[this.name];t.thickness=void 0!==s.thicknessFactor?s.thicknessFactor:0,void 0!==s.thicknessTexture&&i.push(n.assignTexture(t,"thicknessMap",s.thicknessTexture)),t.attenuationDistance=s.attenuationDistance||1/0;const a=s.attenuationColor||[1,1,1];return t.attenuationColor=(new o.Ilk).setRGB(a[0],a[1],a[2],o.GUF),Promise.all(i)}}class g{constructor(e){this.parser=e,this.name=a.KHR_MATERIALS_IOR}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?o.EJi:null}extendMaterialParams(e,t){const n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const o=n.extensions[this.name];return t.ior=void 0!==o.ior?o.ior:1.5,Promise.resolve()}}class v{constructor(e){this.parser=e,this.name=a.KHR_MATERIALS_SPECULAR}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?o.EJi:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],s=r.extensions[this.name];t.specularIntensity=void 0!==s.specularFactor?s.specularFactor:1,void 0!==s.specularTexture&&i.push(n.assignTexture(t,"specularIntensityMap",s.specularTexture));const a=s.specularColorFactor||[1,1,1];return t.specularColor=(new o.Ilk).setRGB(a[0],a[1],a[2],o.GUF),void 0!==s.specularColorTexture&&i.push(n.assignTexture(t,"specularColorMap",s.specularColorTexture,o.KI_)),Promise.all(i)}}class w{constructor(e){this.parser=e,this.name=a.EXT_MATERIALS_BUMP}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?o.EJi:null}extendMaterialParams(e,t){const n=this.parser,o=n.json.materials[e];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const r=[],i=o.extensions[this.name];return t.bumpScale=void 0!==i.bumpFactor?i.bumpFactor:1,void 0!==i.bumpTexture&&r.push(n.assignTexture(t,"bumpMap",i.bumpTexture)),Promise.all(r)}}class b{constructor(e){this.parser=e,this.name=a.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?o.EJi:null}extendMaterialParams(e,t){const n=this.parser,o=n.json.materials[e];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const r=[],i=o.extensions[this.name];return void 0!==i.anisotropyStrength&&(t.anisotropy=i.anisotropyStrength),void 0!==i.anisotropyRotation&&(t.anisotropyRotation=i.anisotropyRotation),void 0!==i.anisotropyTexture&&r.push(n.assignTexture(t,"anisotropyMap",i.anisotropyTexture)),Promise.all(r)}}class x{constructor(e){this.parser=e,this.name=a.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,n=t.json,o=n.textures[e];if(!o.extensions||!o.extensions[this.name])return null;const r=o.extensions[this.name],i=t.options.ktx2Loader;if(!i){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,r.source,i)}}class y{constructor(e){this.parser=e,this.name=a.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,o=n.json,r=o.textures[e];if(!r.extensions||!r.extensions[t])return null;const i=r.extensions[t],s=o.images[i.source];let a=n.textureLoader;if(s.uri){const e=n.options.manager.getHandler(s.uri);null!==e&&(a=e)}return this.detectSupport().then((function(r){if(r)return n.loadTextureImage(e,i.source,a);if(o.extensionsRequired&&o.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)}))}detectSupport(){return this.isSupported||(this.isSupported=new Promise((function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}}))),this.isSupported}}class _{constructor(e){this.parser=e,this.name=a.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,o=n.json,r=o.textures[e];if(!r.extensions||!r.extensions[t])return null;const i=r.extensions[t],s=o.images[i.source];let a=n.textureLoader;if(s.uri){const e=n.options.manager.getHandler(s.uri);null!==e&&(a=e)}return this.detectSupport().then((function(r){if(r)return n.loadTextureImage(e,i.source,a);if(o.extensionsRequired&&o.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return n.loadTexture(e)}))}detectSupport(){return this.isSupported||(this.isSupported=new Promise((function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(1===t.height)}}))),this.isSupported}}class A{constructor(e){this.name=a.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){const e=n.extensions[this.name],o=this.parser.getDependency("buffer",e.buffer),r=this.parser.options.meshoptDecoder;if(!r||!r.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return o.then((function(t){const n=e.byteOffset||0,o=e.byteLength||0,i=e.count,s=e.byteStride,a=new Uint8Array(t,n,o);return r.decodeGltfBufferAsync?r.decodeGltfBufferAsync(i,s,a,e.mode,e.filter).then((function(e){return e.buffer})):r.ready.then((function(){const t=new ArrayBuffer(i*s);return r.decodeGltfBuffer(new Uint8Array(t),i,s,a,e.mode,e.filter),t}))}))}return null}}class T{constructor(e){this.name=a.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,n=t.nodes[e];if(!n.extensions||!n.extensions[this.name]||void 0===n.mesh)return null;const r=t.meshes[n.mesh];for(const e of r.primitives)if(e.mode!==O.TRIANGLES&&e.mode!==O.TRIANGLE_STRIP&&e.mode!==O.TRIANGLE_FAN&&void 0!==e.mode)return null;const i=n.extensions[this.name].attributes,s=[],a={};for(const e in i)s.push(this.parser.getDependency("accessor",i[e]).then((t=>(a[e]=t,a[e]))));return s.length<1?null:(s.push(this.parser.createNodeMesh(e)),Promise.all(s).then((e=>{const t=e.pop(),n=t.isGroup?t.children:[t],r=e[0].count,i=[];for(const e of n){const t=new o.yGw,n=new o.Pa4,s=new o._fP,l=new o.Pa4(1,1,1),c=new o.SPe(e.geometry,e.material,r);for(let e=0;e<r;e++)a.TRANSLATION&&n.fromBufferAttribute(a.TRANSLATION,e),a.ROTATION&&s.fromBufferAttribute(a.ROTATION,e),a.SCALE&&l.fromBufferAttribute(a.SCALE,e),c.setMatrixAt(e,t.compose(n,s,l));for(const t in a)if("_COLOR_0"===t){const e=a[t];c.instanceColor=new o.lb7(e.array,e.itemSize,e.normalized)}else"TRANSLATION"!==t&&"ROTATION"!==t&&"SCALE"!==t&&e.geometry.setAttribute(t,a[t]);o.Tme.prototype.copy.call(c,e),this.parser.assignFinalMaterial(c),i.push(c)}return t.isGroup?(t.clear(),t.add(...i),t):i[0]})))}}const S="glTF";class E{constructor(e){this.name=a.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,12),n=new TextDecoder;if(this.header={magic:n.decode(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==S)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const o=this.header.length-12,r=new DataView(e,12);let i=0;for(;i<o;){const t=r.getUint32(i,!0);i+=4;const o=r.getUint32(i,!0);if(i+=4,1313821514===o){const o=new Uint8Array(e,12+i,t);this.content=n.decode(o)}else if(5130562===o){const n=12+i;this.body=e.slice(n,n+t)}i+=t}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class R{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=a.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const n=this.json,o=this.dracoLoader,r=e.extensions[this.name].bufferView,i=e.extensions[this.name].attributes,s={},a={},l={};for(const e in i){const t=F[e]||e.toLowerCase();s[t]=i[e]}for(const t in e.attributes){const o=F[t]||t.toLowerCase();if(void 0!==i[t]){const r=n.accessors[e.attributes[t]],i=N[r.componentType];l[o]=i.name,a[o]=!0===r.normalized}}return t.getDependency("bufferView",r).then((function(e){return new Promise((function(t){o.decodeDracoFile(e,(function(e){for(const t in e.attributes){const n=e.attributes[t],o=a[t];void 0!==o&&(n.normalized=o)}t(e)}),s,l)}))}))}}class M{constructor(){this.name=a.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return void 0!==t.texCoord&&t.texCoord!==e.channel||void 0!==t.offset||void 0!==t.rotation||void 0!==t.scale?(e=e.clone(),void 0!==t.texCoord&&(e.channel=t.texCoord),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),e.needsUpdate=!0,e):e}}class L{constructor(){this.name=a.KHR_MESH_QUANTIZATION}}class P extends o._C8{constructor(e,t,n,o){super(e,t,n,o)}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,o=this.valueSize,r=e*o*3+o;for(let e=0;e!==o;e++)t[e]=n[r+e];return t}interpolate_(e,t,n,o){const r=this.resultBuffer,i=this.sampleValues,s=this.valueSize,a=2*s,l=3*s,c=o-t,u=(n-t)/c,d=u*u,p=d*u,h=e*l,m=h-l,f=-2*p+3*d,g=p-d,v=1-f,w=g-d+u;for(let e=0;e!==s;e++){const t=i[m+e+s],n=i[m+e+a]*c,o=i[h+e+s],l=i[h+e]*c;r[e]=v*t+w*n+f*o+g*l}return r}}const C=new o._fP;class I extends P{interpolate_(e,t,n,o){const r=super.interpolate_(e,t,n,o);return C.fromArray(r).normalize().toArray(r),r}}const O={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},N={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},k={9728:o.TyD,9729:o.wem,9984:o.YLQ,9985:o.qyh,9986:o.aH4,9987:o.D1R},H={33071:o.uWy,33648:o.OoA,10497:o.rpg},D={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},F={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},B={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},G={CUBICSPLINE:void 0,LINEAR:o.NMF,STEP:o.Syv};function U(e,t,n){for(const o in n.extensions)void 0===e[o]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[o]=n.extensions[o])}function j(e,t){void 0!==t.extras&&("object"==typeof t.extras?Object.assign(e.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function z(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(let n=0,o=t.weights.length;n<o;n++)e.morphTargetInfluences[n]=t.weights[n];if(t.extras&&Array.isArray(t.extras.targetNames)){const n=t.extras.targetNames;if(e.morphTargetInfluences.length===n.length){e.morphTargetDictionary={};for(let t=0,o=n.length;t<o;t++)e.morphTargetDictionary[n[t]]=t}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function V(e){let t;const n=e.extensions&&e.extensions[a.KHR_DRACO_MESH_COMPRESSION];if(t=n?"draco:"+n.bufferView+":"+n.indices+":"+Z(n.attributes):e.indices+":"+Z(e.attributes)+":"+e.mode,void 0!==e.targets)for(let n=0,o=e.targets.length;n<o;n++)t+=":"+Z(e.targets[n]);return t}function Z(e){let t="";const n=Object.keys(e).sort();for(let o=0,r=n.length;o<r;o++)t+=n[o]+":"+e[n[o]]+";";return t}function K(e){switch(e){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}const W=new o.yGw;class X{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new s,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let n=!1,r=!1,i=-1;"undefined"!=typeof navigator&&(n=!0===/^((?!chrome|android).)*safari/i.test(navigator.userAgent),r=navigator.userAgent.indexOf("Firefox")>-1,i=r?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),"undefined"==typeof createImageBitmap||n||r&&i<98?this.textureLoader=new o.dpR(this.options.manager):this.textureLoader=new o.QRU(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new o.hH6(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const n=this,o=this.json,r=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll((function(e){return e._markDefs&&e._markDefs()})),Promise.all(this._invokeAll((function(e){return e.beforeRoot&&e.beforeRoot()}))).then((function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])})).then((function(t){const i={scene:t[0][o.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:o.asset,parser:n,userData:{}};return U(r,i,o),j(i,o),Promise.all(n._invokeAll((function(e){return e.afterRoot&&e.afterRoot(i)}))).then((function(){e(i)}))})).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[];for(let n=0,o=t.length;n<o;n++){const o=t[n].joints;for(let t=0,n=o.length;t<n;t++)e[o[t]].isBone=!0}for(let t=0,o=e.length;t<o;t++){const o=e[t];void 0!==o.mesh&&(this._addNodeRef(this.meshCache,o.mesh),void 0!==o.skin&&(n[o.mesh].isSkinnedMesh=!0)),void 0!==o.camera&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,n){if(e.refs[t]<=1)return n;const o=n.clone(),r=(e,t)=>{const n=this.associations.get(e);null!=n&&this.associations.set(t,n);for(const[n,o]of e.children.entries())r(o,t.children[n])};return r(n,o),o.name+="_instance_"+e.uses[t]++,o}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let n=0;n<t.length;n++){const o=e(t[n]);if(o)return o}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const n=[];for(let o=0;o<t.length;o++){const r=e(t[o]);r&&n.push(r)}return n}getDependency(e,t){const n=e+":"+t;let o=this.cache.get(n);if(!o){switch(e){case"scene":o=this.loadScene(t);break;case"node":o=this._invokeOne((function(e){return e.loadNode&&e.loadNode(t)}));break;case"mesh":o=this._invokeOne((function(e){return e.loadMesh&&e.loadMesh(t)}));break;case"accessor":o=this.loadAccessor(t);break;case"bufferView":o=this._invokeOne((function(e){return e.loadBufferView&&e.loadBufferView(t)}));break;case"buffer":o=this.loadBuffer(t);break;case"material":o=this._invokeOne((function(e){return e.loadMaterial&&e.loadMaterial(t)}));break;case"texture":o=this._invokeOne((function(e){return e.loadTexture&&e.loadTexture(t)}));break;case"skin":o=this.loadSkin(t);break;case"animation":o=this._invokeOne((function(e){return e.loadAnimation&&e.loadAnimation(t)}));break;case"camera":o=this.loadCamera(t);break;default:if(o=this._invokeOne((function(n){return n!=this&&n.getDependency&&n.getDependency(e,t)})),!o)throw new Error("Unknown type: "+e)}this.cache.add(n,o)}return o}getDependencies(e){let t=this.cache.get(e);if(!t){const n=this,o=this.json[e+("mesh"===e?"es":"s")]||[];t=Promise.all(o.map((function(t,o){return n.getDependency(e,o)}))),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],n=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[a.KHR_BINARY_GLTF].body);const r=this.options;return new Promise((function(e,i){n.load(o.Zp0.resolveURL(t.uri,r.path),e,void 0,(function(){i(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))}))}))}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then((function(e){const n=t.byteLength||0,o=t.byteOffset||0;return e.slice(o,o+n)}))}loadAccessor(e){const t=this,n=this.json,r=this.json.accessors[e];if(void 0===r.bufferView&&void 0===r.sparse){const e=D[r.type],t=N[r.componentType],n=!0===r.normalized,i=new t(r.count*e);return Promise.resolve(new o.TlE(i,e,n))}const i=[];return void 0!==r.bufferView?i.push(this.getDependency("bufferView",r.bufferView)):i.push(null),void 0!==r.sparse&&(i.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),i.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(i).then((function(e){const i=e[0],s=D[r.type],a=N[r.componentType],l=a.BYTES_PER_ELEMENT,c=l*s,u=r.byteOffset||0,d=void 0!==r.bufferView?n.bufferViews[r.bufferView].byteStride:void 0,p=!0===r.normalized;let h,m;if(d&&d!==c){const e=Math.floor(u/d),n="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+e+":"+r.count;let c=t.cache.get(n);c||(h=new a(i,e*d,r.count*d/l),c=new o.vpT(h,d/l),t.cache.add(n,c)),m=new o.kB5(c,s,u%d/l,p)}else h=null===i?new a(r.count*s):new a(i,u,r.count*s),m=new o.TlE(h,s,p);if(void 0!==r.sparse){const t=D.SCALAR,n=N[r.sparse.indices.componentType],l=r.sparse.indices.byteOffset||0,c=r.sparse.values.byteOffset||0,u=new n(e[1],l,r.sparse.count*t),d=new a(e[2],c,r.sparse.count*s);null!==i&&(m=new o.TlE(m.array.slice(),m.itemSize,m.normalized));for(let e=0,t=u.length;e<t;e++){const t=u[e];if(m.setX(t,d[e*s]),s>=2&&m.setY(t,d[e*s+1]),s>=3&&m.setZ(t,d[e*s+2]),s>=4&&m.setW(t,d[e*s+3]),s>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return m}))}loadTexture(e){const t=this.json,n=this.options,o=t.textures[e].source,r=t.images[o];let i=this.textureLoader;if(r.uri){const e=n.manager.getHandler(r.uri);null!==e&&(i=e)}return this.loadTextureImage(e,o,i)}loadTextureImage(e,t,n){const r=this,i=this.json,s=i.textures[e],a=i.images[t],l=(a.uri||a.bufferView)+":"+s.sampler;if(this.textureCache[l])return this.textureCache[l];const c=this.loadImageSource(t,n).then((function(t){t.flipY=!1,t.name=s.name||a.name||"",""===t.name&&"string"==typeof a.uri&&!1===a.uri.startsWith("data:image/")&&(t.name=a.uri);const n=(i.samplers||{})[s.sampler]||{};return t.magFilter=k[n.magFilter]||o.wem,t.minFilter=k[n.minFilter]||o.D1R,t.wrapS=H[n.wrapS]||o.rpg,t.wrapT=H[n.wrapT]||o.rpg,r.associations.set(t,{textures:e}),t})).catch((function(){return null}));return this.textureCache[l]=c,c}loadImageSource(e,t){const n=this.json,r=this.options;if(void 0!==this.sourceCache[e])return this.sourceCache[e].then((e=>e.clone()));const i=n.images[e],s=self.URL||self.webkitURL;let a=i.uri||"",l=!1;if(void 0!==i.bufferView)a=this.getDependency("bufferView",i.bufferView).then((function(e){l=!0;const t=new Blob([e],{type:i.mimeType});return a=s.createObjectURL(t),a}));else if(void 0===i.uri)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const c=Promise.resolve(a).then((function(e){return new Promise((function(n,i){let s=n;!0===t.isImageBitmapLoader&&(s=function(e){const t=new o.xEZ(e);t.needsUpdate=!0,n(t)}),t.load(o.Zp0.resolveURL(e,r.path),s,void 0,i)}))})).then((function(e){var t;return!0===l&&s.revokeObjectURL(a),e.userData.mimeType=i.mimeType||((t=i.uri).search(/\.jpe?g($|\?)/i)>0||0===t.search(/^data\:image\/jpeg/)?"image/jpeg":t.search(/\.webp($|\?)/i)>0||0===t.search(/^data\:image\/webp/)?"image/webp":"image/png"),e})).catch((function(e){throw console.error("THREE.GLTFLoader: Couldn't load texture",a),e}));return this.sourceCache[e]=c,c}assignTexture(e,t,n,o){const r=this;return this.getDependency("texture",n.index).then((function(i){if(!i)return null;if(void 0!==n.texCoord&&n.texCoord>0&&((i=i.clone()).channel=n.texCoord),r.extensions[a.KHR_TEXTURE_TRANSFORM]){const e=void 0!==n.extensions?n.extensions[a.KHR_TEXTURE_TRANSFORM]:void 0;if(e){const t=r.associations.get(i);i=r.extensions[a.KHR_TEXTURE_TRANSFORM].extendTexture(i,e),r.associations.set(i,t)}}return void 0!==o&&(i.colorSpace=o),e[t]=i,i}))}assignFinalMaterial(e){const t=e.geometry;let n=e.material;const r=void 0===t.attributes.tangent,i=void 0!==t.attributes.color,s=void 0===t.attributes.normal;if(e.isPoints){const e="PointsMaterial:"+n.uuid;let t=this.cache.get(e);t||(t=new o.UY4,o.F5T.prototype.copy.call(t,n),t.color.copy(n.color),t.map=n.map,t.sizeAttenuation=!1,this.cache.add(e,t)),n=t}else if(e.isLine){const e="LineBasicMaterial:"+n.uuid;let t=this.cache.get(e);t||(t=new o.nls,o.F5T.prototype.copy.call(t,n),t.color.copy(n.color),t.map=n.map,this.cache.add(e,t)),n=t}if(r||i||s){let e="ClonedMaterial:"+n.uuid+":";r&&(e+="derivative-tangents:"),i&&(e+="vertex-colors:"),s&&(e+="flat-shading:");let t=this.cache.get(e);t||(t=n.clone(),i&&(t.vertexColors=!0),s&&(t.flatShading=!0),r&&(t.normalScale&&(t.normalScale.y*=-1),t.clearcoatNormalScale&&(t.clearcoatNormalScale.y*=-1)),this.cache.add(e,t),this.associations.set(t,this.associations.get(n))),n=t}e.material=n}getMaterialType(){return o.Wid}loadMaterial(e){const t=this,n=this.json,r=this.extensions,i=n.materials[e];let s;const l={},c=[];if((i.extensions||{})[a.KHR_MATERIALS_UNLIT]){const e=r[a.KHR_MATERIALS_UNLIT];s=e.getMaterialType(),c.push(e.extendParams(l,i,t))}else{const n=i.pbrMetallicRoughness||{};if(l.color=new o.Ilk(1,1,1),l.opacity=1,Array.isArray(n.baseColorFactor)){const e=n.baseColorFactor;l.color.setRGB(e[0],e[1],e[2],o.GUF),l.opacity=e[3]}void 0!==n.baseColorTexture&&c.push(t.assignTexture(l,"map",n.baseColorTexture,o.KI_)),l.metalness=void 0!==n.metallicFactor?n.metallicFactor:1,l.roughness=void 0!==n.roughnessFactor?n.roughnessFactor:1,void 0!==n.metallicRoughnessTexture&&(c.push(t.assignTexture(l,"metalnessMap",n.metallicRoughnessTexture)),c.push(t.assignTexture(l,"roughnessMap",n.metallicRoughnessTexture))),s=this._invokeOne((function(t){return t.getMaterialType&&t.getMaterialType(e)})),c.push(Promise.all(this._invokeAll((function(t){return t.extendMaterialParams&&t.extendMaterialParams(e,l)}))))}!0===i.doubleSided&&(l.side=o.ehD);const u=i.alphaMode||"OPAQUE";if("BLEND"===u?(l.transparent=!0,l.depthWrite=!1):(l.transparent=!1,"MASK"===u&&(l.alphaTest=void 0!==i.alphaCutoff?i.alphaCutoff:.5)),void 0!==i.normalTexture&&s!==o.vBJ&&(c.push(t.assignTexture(l,"normalMap",i.normalTexture)),l.normalScale=new o.FM8(1,1),void 0!==i.normalTexture.scale)){const e=i.normalTexture.scale;l.normalScale.set(e,e)}if(void 0!==i.occlusionTexture&&s!==o.vBJ&&(c.push(t.assignTexture(l,"aoMap",i.occlusionTexture)),void 0!==i.occlusionTexture.strength&&(l.aoMapIntensity=i.occlusionTexture.strength)),void 0!==i.emissiveFactor&&s!==o.vBJ){const e=i.emissiveFactor;l.emissive=(new o.Ilk).setRGB(e[0],e[1],e[2],o.GUF)}return void 0!==i.emissiveTexture&&s!==o.vBJ&&c.push(t.assignTexture(l,"emissiveMap",i.emissiveTexture,o.KI_)),Promise.all(c).then((function(){const n=new s(l);return i.name&&(n.name=i.name),j(n,i),t.associations.set(n,{materials:e}),i.extensions&&U(r,n,i),n}))}createUniqueName(e){const t=o.iUV.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,n=this.extensions,r=this.primitiveCache;function i(e){return n[a.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,t).then((function(n){return $(n,e,t)}))}const s=[];for(let n=0,l=e.length;n<l;n++){const l=e[n],c=V(l),u=r[c];if(u)s.push(u.promise);else{let e;e=l.extensions&&l.extensions[a.KHR_DRACO_MESH_COMPRESSION]?i(l):$(new o.u9r,l,t),r[c]={primitive:l,promise:e},s.push(e)}}return Promise.all(s)}loadMesh(e){const t=this,n=this.json,i=this.extensions,s=n.meshes[e],a=s.primitives,l=[];for(let e=0,t=a.length;e<t;e++){const t=void 0===a[e].material?(void 0===(c=this.cache).DefaultMaterial&&(c.DefaultMaterial=new o.Wid({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:o.Wl3})),c.DefaultMaterial):this.getDependency("material",a[e].material);l.push(t)}var c;return l.push(t.loadGeometries(a)),Promise.all(l).then((function(n){const l=n.slice(0,n.length-1),c=n[n.length-1],u=[];for(let n=0,d=c.length;n<d;n++){const d=c[n],p=a[n];let h;const m=l[n];if(p.mode===O.TRIANGLES||p.mode===O.TRIANGLE_STRIP||p.mode===O.TRIANGLE_FAN||void 0===p.mode)h=!0===s.isSkinnedMesh?new o.TUv(d,m):new o.Kj0(d,m),!0===h.isSkinnedMesh&&h.normalizeSkinWeights(),p.mode===O.TRIANGLE_STRIP?h.geometry=r(h.geometry,o.UlW):p.mode===O.TRIANGLE_FAN&&(h.geometry=r(h.geometry,o.z$h));else if(p.mode===O.LINES)h=new o.ejS(d,m);else if(p.mode===O.LINE_STRIP)h=new o.x12(d,m);else if(p.mode===O.LINE_LOOP)h=new o.blk(d,m);else{if(p.mode!==O.POINTS)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+p.mode);h=new o.woe(d,m)}Object.keys(h.geometry.morphAttributes).length>0&&z(h,s),h.name=t.createUniqueName(s.name||"mesh_"+e),j(h,s),p.extensions&&U(i,h,p),t.assignFinalMaterial(h),u.push(h)}for(let n=0,o=u.length;n<o;n++)t.associations.set(u[n],{meshes:e,primitives:n});if(1===u.length)return s.extensions&&U(i,u[0],s),u[0];const d=new o.ZAu;s.extensions&&U(i,d,s),t.associations.set(d,{meshes:e});for(let e=0,t=u.length;e<t;e++)d.add(u[e]);return d}))}loadCamera(e){let t;const n=this.json.cameras[e],r=n[n.type];if(r)return"perspective"===n.type?t=new o.cPb(o.M8C.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):"orthographic"===n.type&&(t=new o.iKG(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),j(t,n),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(e){const t=this.json.skins[e],n=[];for(let e=0,o=t.joints.length;e<o;e++)n.push(this._loadNodeShallow(t.joints[e]));return void 0!==t.inverseBindMatrices?n.push(this.getDependency("accessor",t.inverseBindMatrices)):n.push(null),Promise.all(n).then((function(e){const n=e.pop(),r=e,i=[],s=[];for(let e=0,a=r.length;e<a;e++){const a=r[e];if(a){i.push(a);const t=new o.yGw;null!==n&&t.fromArray(n.array,16*e),s.push(t)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[e])}return new o.OdW(i,s)}))}loadAnimation(e){const t=this.json,n=this,r=t.animations[e],i=r.name?r.name:"animation_"+e,s=[],a=[],l=[],c=[],u=[];for(let e=0,t=r.channels.length;e<t;e++){const t=r.channels[e],n=r.samplers[t.sampler],o=t.target,i=o.node,d=void 0!==r.parameters?r.parameters[n.input]:n.input,p=void 0!==r.parameters?r.parameters[n.output]:n.output;void 0!==o.node&&(s.push(this.getDependency("node",i)),a.push(this.getDependency("accessor",d)),l.push(this.getDependency("accessor",p)),c.push(n),u.push(o))}return Promise.all([Promise.all(s),Promise.all(a),Promise.all(l),Promise.all(c),Promise.all(u)]).then((function(e){const t=e[0],r=e[1],s=e[2],a=e[3],l=e[4],c=[];for(let e=0,o=t.length;e<o;e++){const o=t[e],i=r[e],u=s[e],d=a[e],p=l[e];if(void 0===o)continue;o.updateMatrix&&o.updateMatrix();const h=n._createAnimationTracks(o,i,u,d,p);if(h)for(let e=0;e<h.length;e++)c.push(h[e])}return new o.m7l(i,void 0,c)}))}createNodeMesh(e){const t=this.json,n=this,o=t.nodes[e];return void 0===o.mesh?null:n.getDependency("mesh",o.mesh).then((function(e){const t=n._getNodeRef(n.meshCache,o.mesh,e);return void 0!==o.weights&&t.traverse((function(e){if(e.isMesh)for(let t=0,n=o.weights.length;t<n;t++)e.morphTargetInfluences[t]=o.weights[t]})),t}))}loadNode(e){const t=this,n=this.json.nodes[e],o=t._loadNodeShallow(e),r=[],i=n.children||[];for(let e=0,n=i.length;e<n;e++)r.push(t.getDependency("node",i[e]));const s=void 0===n.skin?Promise.resolve(null):t.getDependency("skin",n.skin);return Promise.all([o,Promise.all(r),s]).then((function(e){const t=e[0],n=e[1],o=e[2];null!==o&&t.traverse((function(e){e.isSkinnedMesh&&e.bind(o,W)}));for(let e=0,o=n.length;e<o;e++)t.add(n[e]);return t}))}_loadNodeShallow(e){const t=this.json,n=this.extensions,r=this;if(void 0!==this.nodeCache[e])return this.nodeCache[e];const i=t.nodes[e],s=i.name?r.createUniqueName(i.name):"",a=[],l=r._invokeOne((function(t){return t.createNodeMesh&&t.createNodeMesh(e)}));return l&&a.push(l),void 0!==i.camera&&a.push(r.getDependency("camera",i.camera).then((function(e){return r._getNodeRef(r.cameraCache,i.camera,e)}))),r._invokeAll((function(t){return t.createNodeAttachment&&t.createNodeAttachment(e)})).forEach((function(e){a.push(e)})),this.nodeCache[e]=Promise.all(a).then((function(t){let a;if(a=!0===i.isBone?new o.N$j:t.length>1?new o.ZAu:1===t.length?t[0]:new o.Tme,a!==t[0])for(let e=0,n=t.length;e<n;e++)a.add(t[e]);if(i.name&&(a.userData.name=i.name,a.name=s),j(a,i),i.extensions&&U(n,a,i),void 0!==i.matrix){const e=new o.yGw;e.fromArray(i.matrix),a.applyMatrix4(e)}else void 0!==i.translation&&a.position.fromArray(i.translation),void 0!==i.rotation&&a.quaternion.fromArray(i.rotation),void 0!==i.scale&&a.scale.fromArray(i.scale);return r.associations.has(a)||r.associations.set(a,{}),r.associations.get(a).nodes=e,a})),this.nodeCache[e]}loadScene(e){const t=this.extensions,n=this.json.scenes[e],r=this,i=new o.ZAu;n.name&&(i.name=r.createUniqueName(n.name)),j(i,n),n.extensions&&U(t,i,n);const s=n.nodes||[],a=[];for(let e=0,t=s.length;e<t;e++)a.push(r.getDependency("node",s[e]));return Promise.all(a).then((function(e){for(let t=0,n=e.length;t<n;t++)i.add(e[t]);return r.associations=(e=>{const t=new Map;for(const[e,n]of r.associations)(e instanceof o.F5T||e instanceof o.xEZ)&&t.set(e,n);return e.traverse((e=>{const n=r.associations.get(e);null!=n&&t.set(e,n)})),t})(i),i}))}_createAnimationTracks(e,t,n,r,i){const s=[],a=e.name?e.name:e.uuid,l=[];let c;switch(B[i.path]===B.weights?e.traverse((function(e){e.morphTargetInfluences&&l.push(e.name?e.name:e.uuid)})):l.push(a),B[i.path]){case B.weights:c=o.dUE;break;case B.rotation:c=o.iLg;break;case B.position:case B.scale:c=o.yC1;break;default:c=1===n.itemSize?o.dUE:o.yC1}const u=void 0!==r.interpolation?G[r.interpolation]:o.NMF,d=this._getArrayFromAccessor(n);for(let e=0,n=l.length;e<n;e++){const n=new c(l[e]+"."+B[i.path],t.array,d,u);"CUBICSPLINE"===r.interpolation&&this._createCubicSplineTrackInterpolant(n),s.push(n)}return s}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const e=K(t.constructor),n=new Float32Array(t.length);for(let o=0,r=t.length;o<r;o++)n[o]=t[o]*e;t=n}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(e){return new(this instanceof o.iLg?I:P)(this.times,this.values,this.getValueSize()/3,e)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function $(e,t,n){const r=t.attributes,i=[];function s(t,o){return n.getDependency("accessor",t).then((function(t){e.setAttribute(o,t)}))}for(const t in r){const n=F[t]||t.toLowerCase();n in e.attributes||i.push(s(r[t],n))}if(void 0!==t.indices&&!e.index){const o=n.getDependency("accessor",t.indices).then((function(t){e.setIndex(t)}));i.push(o)}return o.epp.workingColorSpace!==o.GUF&&"COLOR_0"in r&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${o.epp.workingColorSpace}" not supported.`),j(e,t),function(e,t,n){const r=t.attributes,i=new o.ZzF;if(void 0===r.POSITION)return;{const e=n.json.accessors[r.POSITION],t=e.min,s=e.max;if(void 0===t||void 0===s)return void console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(i.set(new o.Pa4(t[0],t[1],t[2]),new o.Pa4(s[0],s[1],s[2])),e.normalized){const t=K(N[e.componentType]);i.min.multiplyScalar(t),i.max.multiplyScalar(t)}}const s=t.targets;if(void 0!==s){const e=new o.Pa4,t=new o.Pa4;for(let o=0,r=s.length;o<r;o++){const r=s[o];if(void 0!==r.POSITION){const o=n.json.accessors[r.POSITION],i=o.min,s=o.max;if(void 0!==i&&void 0!==s){if(t.setX(Math.max(Math.abs(i[0]),Math.abs(s[0]))),t.setY(Math.max(Math.abs(i[1]),Math.abs(s[1]))),t.setZ(Math.max(Math.abs(i[2]),Math.abs(s[2]))),o.normalized){const e=K(N[o.componentType]);t.multiplyScalar(e)}e.max(t)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}i.expandByVector(e)}e.boundingBox=i;const a=new o.aLr;i.getCenter(a.center),a.radius=i.min.distanceTo(i.max)/2,e.boundingSphere=a}(e,t,n),Promise.all(i).then((function(){return void 0!==t.targets?function(e,t,n){let o=!1,r=!1,i=!1;for(let e=0,n=t.length;e<n;e++){const n=t[e];if(void 0!==n.POSITION&&(o=!0),void 0!==n.NORMAL&&(r=!0),void 0!==n.COLOR_0&&(i=!0),o&&r&&i)break}if(!o&&!r&&!i)return Promise.resolve(e);const s=[],a=[],l=[];for(let c=0,u=t.length;c<u;c++){const u=t[c];if(o){const t=void 0!==u.POSITION?n.getDependency("accessor",u.POSITION):e.attributes.position;s.push(t)}if(r){const t=void 0!==u.NORMAL?n.getDependency("accessor",u.NORMAL):e.attributes.normal;a.push(t)}if(i){const t=void 0!==u.COLOR_0?n.getDependency("accessor",u.COLOR_0):e.attributes.color;l.push(t)}}return Promise.all([Promise.all(s),Promise.all(a),Promise.all(l)]).then((function(t){const n=t[0],s=t[1],a=t[2];return o&&(e.morphAttributes.position=n),r&&(e.morphAttributes.normal=s),i&&(e.morphAttributes.color=a),e.morphTargetsRelative=!0,e}))}(e,t.targets,n):e}))}var q=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function s(e){try{l(o.next(e))}catch(e){i(e)}}function a(e){try{l(o.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((o=o.apply(e,t||[])).next())}))},J=function(e,t){var n,o,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(s=0)),s;)try{if(n=1,o&&(r=2&a[0]?o.return:a[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,a[1])).done)return r;switch(o=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,o=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((r=(r=s.trys).length>0&&r[r.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){s.label=a[1];break}if(6===a[0]&&s.label<r[1]){s.label=r[1],r=a;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(a);break}r[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],o=0}finally{n=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},Y=new i,Q=new o.xsS,ee=new o.cPb(60,window.innerWidth/window.innerHeight,.1,1e3),te=new o.Pa4(0,0,0),ne=new o.Mig(new o.Ilk(13434624),.3),oe=new o.Ox3(new o.Ilk(16777215),2.6);oe.lookAt(0,0,0),Q.add(ne),Q.add(oe),Q.background=new o.Ilk(1118511),ee.position.y=8,ee.position.z=-6,ee.lookAt(0,3,4);var re=[],ie=[],se=[],ae=[],le=function(e){return q(void 0,void 0,void 0,(function(){var t,n;return J(this,(function(o){return t=e.id,n=e.path,[2,new Promise((function(e,o){Y.load(n,(function(n){se.push({id:t,model:n}),e(n)}),(function(e){}),(function(e){return o(e)}))}))]}))}))},ce=function(){return Q},ue=function(){return ee},de=function(e,t){var n=se.find((function(t){return t.id===e}));if(!n)throw new Error("Can't add to scene source model with id: `".concat(e,"`. Source model was not found."));var o=n.model.scene.children[0].clone(),r={id:t,model:o};return re.push(r),Q.add(o),r},pe=function(e,t,n){return q(void 0,void 0,void 0,(function(){var o,r,i,s,a;return J(this,(function(l){switch(l.label){case 0:return o=fetch(e),r=fetch(t),[4,Promise.all([o,r])];case 1:return i=l.sent(),[4,Promise.all([i[0].text(),i[1].text()])];case 2:return s=l.sent(),a={id:n,f:s[0],v:s[1]},ae.push(a),[2,Promise.resolve(a)]}}))}))},he=function(e,t){return new Promise((function(n,r){(new o.dpR).load(e,(function(e){var o={id:t,texture:e};ie.push(o),n(o)}),(function(){}),(function(e){r(e)}))}))},me=function(e){var t=ae.find((function(t){return t.id===e}));if(!t)throw new Error("Can't get shader with id: `".concat(e,"`. Shader was not found."));return t},fe=function(e){var t=ie.find((function(t){return t.id===e}));if(!t)throw new Error("Can't get texture with id: `".concat(e,"`. Texture was not found."));return t},ge=function(){return te},ve=new o.SJI,we=new o.mTL,be=new o.BbS(ve),xe=new o.BbS(ve),ye=[],_e=1,Ae=function(e,t){return new Promise((function(n,o){we.load(e,(function(o){var r={id:t,path:e,buffer:o};ye.push(r),n(r)}),null,(function(e){o(e)}))}))},Te=function(e){_e=e},Se={w:!1,a:!1,s:!1,d:!1,leftDirectionSwipe:!1,rightDirectionSwipe:!1};document.addEventListener("DOMContentLoaded",(function(){document.addEventListener("keydown",(function(e){var t=e.key;"w"===t&&(Se.w=!0),"a"===t&&(Se.a=!0),"s"===t&&(Se.s=!0),"d"===t&&(Se.d=!0)})),document.addEventListener("keyup",(function(e){var t=e.key;"w"===t&&(Se.w=!1),"a"===t&&(Se.a=!1),"s"===t&&(Se.s=!1),"d"===t&&(Se.d=!1)}));var e=null,t=null,n=-1;document.addEventListener("touchstart",(function(n){var o=n.touches[0];e=o.clientX,t=o.clientY}),!1),document.addEventListener("touchmove",(function(o){if(e&&t){var r=o.touches[0].clientX,i=o.touches[0].clientY,s=e-r,a=t-i;Math.abs(s)>Math.abs(a)&&(s>0?(n<0&&(n=1),e=o.touches[0].clientX,t=o.touches[0].clientY,Se.rightDirectionSwipe=!0,Se.leftDirectionSwipe=!1):(n>0&&(n=-1),e=o.touches[0].clientX,t=o.touches[0].clientY,Se.leftDirectionSwipe=!0,Se.rightDirectionSwipe=!1))}}),!1),document.addEventListener("touchend",(function(){Se.leftDirectionSwipe=!1,Se.rightDirectionSwipe=!1}),!1)}));var Ee=null,Re=function(e){return"turbo_left_front_side"===e.name||"turbo_left_back_side"===e.name||"turbo_right_front_side"===e.name||"turbo_right_back_side"===e.name},Me=null,Le=function(e){Me.acceleration=0,Me.rotation=(new o._fP).setFromAxisAngle(new o.Pa4(1,0,0).normalize(),Math.PI/2);var t="left"===e?3.8:-3.8;Me.targetPosition.set(t,0,6),Me.position.set(t,0,6),Me.speed=.2,Me.view.view.position.copy(Me.position),Me.view.view.rotation.setFromQuaternion(Me.rotation);var n=new o.Pa4;Me.view.view.getWorldDirection(n)},Pe=function(e,t){Me.targetPosition.copy(Me.position.clone()),Me.targetPosition.add(new o.Pa4(0,0,Me.speed*t));var n=Me.position.lerp(Me.targetPosition,1-Math.exp(-.75*e));Me.position.copy(n),Me.view.view.position.copy(Me.position)},Ce=function(e){return Me=e},Ie=function(){var e,t,n,r,i="bound_line_model_".concat(Date.now()),s=new o.fHI(.05,.05,32,32),a=new o.jyz({vertexShader:me("boundary_line").v,fragmentShader:me("boundary_line").f,transparent:!0,depthTest:!0,depthWrite:!0,blending:o.WMw,uniforms:{}}),l=new o.Kj0(s,a);return{view:(e=l,t=i,n=e,r={id:t,model:n},re.push(r),Q.add(n),r).model,instanceId:i}},Oe=null,Ne=null,ke={initialize:function(e,t){var n=o.M8C.randInt(-1,1);Oe.targetPosition.set(9*n,0,e.z+36),Oe.position.set(9*n,0,e.z+36),Oe.view.view.position.copy(Oe.position)},move:function(e){Oe.targetPosition.copy(Oe.position.clone()),Oe.targetPosition.add(new o.Pa4(0,0,1e-4));var t=Oe.position.lerp(Oe.targetPosition,e);Oe.position.copy(t),Oe.view.view.position.copy(Oe.position)},getState:function(){return Oe},setState:function(e){return Oe=e},rotationStar:function(e){Oe.targetRotation.copy(Oe.rotation),Oe.targetRotation.multiply((new o._fP).setFromEuler(new o.USm(0,.1,0)));var t=Oe.rotation.slerp(Oe.targetRotation,1-Math.exp(-.75*e));Oe.rotation.copy(t),Oe.view.view.rotation.setFromQuaternion(t)},getView:function(){return Ne},setView:function(e){return Ne=e},setTargetPosition:function(e){Oe.targetPosition.copy(e)},spawn:function(e,t,n){if(0===t.starSpawnCooldown){var r={rotationSpeed:1,rotationAcceleration:0,position:new o.Pa4(0,0,0),targetPosition:new o.Pa4(0,0,0),targetRotation:new o._fP,rotation:new o._fP,view:null,collidedWithPlayer:!1,collidedWithPlayerParticlesLifetime:500},i=function(){var e="star_model_".concat(Date.now()),t=de("star_source",e),n=t.model;n.material=n.material.clone();var r=n.material;r.transparent=!0,r.opacity=0;var i=new o.jyz({vertexShader:me("star_collision_particles").v,fragmentShader:me("star_collision_particles").f,transparent:!0,depthTest:!0,depthWrite:!0,blending:o.WMw,uniforms:{timeElapsed:{value:0}}}),s=new o._12(4,4),a=new o.Kj0(s,i);return a.visible=!1,a.userData.lifetime=400,t.model.scale.subScalar(.4),t.model.add(a),a.name="particle_mesh",{view:t.model,instanceId:e}}();ke.setState(r),ke.setView(i),r.view=i,ke.initialize(t.player.position,t.stars.length>0?t.stars[t.stars.length-1].position:t.player.position),t.starSpawnCooldown=2e3-20*n,t.stars.push(r)}t.starSpawnCooldown-=o.M8C.clamp(e,16.16,32),t.starSpawnCooldown=o.M8C.clamp(t.starSpawnCooldown,0,2e3-20*n)},playerCollision:function(e,t,n,r){var i=(new o.ZzF).setFromObject(t.player.view.view),s=(new o.ZzF).setFromObject(Oe.view.view),a=i.intersectsBox(s),l=Oe.view.view.material;if(Oe.collidedWithPlayer||(l.opacity=o.M8C.clamp(l.opacity+e/500,0,1)),a&&!Oe.collidedWithPlayer&&t.hp>0){Oe.collidedWithPlayer=!0;var c=Oe.view.view.position.clone();Oe.view.view.removeFromParent(),ce().remove(Oe.view.view);for(var u=0;u<80;u++){var d=.06*(.5*Math.random()+.5),p=.5*(.75*Math.random()+.25);r.add({position:c.clone(),currentSize:d,maxSize:d,color:new o.Ilk(65280),alpha:1,currentLifeTime:p,maxLifeTime:p,rotation:2*Math.random()*Math.PI,velocity:new o.Pa4((Math.random()>.5?-1:1)*Math.random()*120,(Math.random()>.5?-1:1)*Math.random()*120,(Math.random()>.5?-1:1)*Math.random()*120),acceleration:new o.Pa4(0,5,0)})}(function(){var e=ye.find((function(e){return"star_pickup_sound"===e.id}));if(!e)throw new Error("Sound data with id: ".concat(e," not found."));"suspended"!==be.context.state?(be.stop(),be.setBuffer(e.buffer),be.setLoop(!1),be.setVolume(_e),be.play()):be.context.resume().then((function(){be.setBuffer(e.buffer),be.setLoop(!1),be.setVolume(_e),be.play()}))})(),n.setScore(n.score+1)}t.stars=t.stars.filter((function(e){return!e.collidedWithPlayer}))}},He=function(){return{speed:1,acceleration:0,position:new o.Pa4(0,0,0),targetPosition:new o.Pa4(0,0,0),rotation:new o._fP,view:null}},De=null,Fe=null,Be={initialize:function(e,t){var n=o.M8C.randInt(-1,1),r=Math.random()>.5,i=e.z+42;Math.abs(e.z-i)<6||(De.targetPosition.set(r?t.x:9*n,0,i),De.position.set(r?t.x:9*n,0,i),De.view.view.position.copy(De.position))},move:function(e){De.targetPosition.copy(De.position.clone()),De.targetPosition.add(new o.Pa4(0,0,1e-4));var t=De.position.lerp(De.targetPosition,e);De.position.copy(t),De.view.view.position.copy(De.position)},getState:function(){return De},setState:function(e){return De=e},getView:function(){return Fe},setView:function(e){return Fe=e},setTargetPosition:function(e){De.targetPosition.copy(e)},spawn:function(e,t,n){if(0===t.asteroidSpawnCooldown&&t.stars[t.stars.length-1]){var r={position:new o.Pa4(0,0,0),targetPosition:new o.Pa4(0,0,0),rotation:new o._fP,view:null,collidedWithPlayer:!1},i=function(){var e,t="asteroid_model_".concat(Date.now()),n="animation_asteroid_model_".concat(Date.now()),o=de("asteroid_source",t),r=de("asteroid_animation",n),i=o.model;i.material=i.material.clone();var s=i.material;return s.transparent=!0,s.opacity=0,o.model.scale.addScalar(1.5),o.model.rotateY(90),r.model.visible=!1,r.model.name="particle_mesh",r.model.userData.lifetime=600,r.model.scale.addScalar(.7),(e=r.model.children).push.apply(e,r.model.children),r.model.children.forEach((function(e){var t=e,n=e.material;t.material=n.clone(),n.transparent=!0})),o.model.add(r.model),{view:o.model,instanceId:t}}();Be.setState(r),Be.setView(i),r.view=i,Be.initialize(t.player.targetPosition,t.stars.length>0?t.stars[t.stars.length-1].position:t.player.position),t.asteroidSpawnCooldown=4e3-20*n,t.asteroids.push(r)}t.asteroidSpawnCooldown-=o.M8C.clamp(e,16.16,32),t.asteroidSpawnCooldown=o.M8C.clamp(t.asteroidSpawnCooldown,0,4e3)},fadeIn:function(e){var t=De.view.view.material;t.opacity=o.M8C.clamp(t.opacity+e/500,0,1)},fadeOutCollisionParticles:function(e,t){for(var n=0,r=t.asteroidParticles;n<r.length;n++)r[n].children.forEach((function(t){var n=t.material;n.transparent=!0,n.opacity=o.M8C.clamp(n.opacity-e/500,0,1)}));for(var i=function(t){t.children.forEach((function(n){var r=new o.Pa4,i=new o.Pa4;t.getWorldPosition(r),n.getWorldPosition(i);var s=i.sub(r).multiplyScalar(Math.random()).normalize();n.position.add(s.multiplyScalar(e/200)),n.rotation.setFromQuaternion((new o._fP).setFromEuler(new o.USm(n.rotation.x+e/200,0,n.rotation.z-e/200)))})),t.userData.lifetime<=0&&(t.visible=!1),t.userData.lifetime-=e},s=0,a=t.asteroidParticles;s<a.length;s++)i(a[s])},playerCollision:function(e,t,n,r){var i=(new o.ZzF).setFromObject(t.player.view.view),s=(new o.ZzF).setFromObject(De.view.view).expandByScalar(-1.5);i.intersectsBox(s)&&!De.collidedWithPlayer&&0===t.player.collisionOpacityValuesDuration&&t.hp>0&&(De.collidedWithPlayer=!0,De.view.view.getObjectByName("particle_mesh").clone().children.forEach((function(e){var t=1.5*(.25*Math.random()+1),n=.75*(.75*Math.random()+.25);r.add({position:De.view.view.position.clone(),currentSize:t,maxSize:t,alpha:1,currentLifeTime:n,maxLifeTime:n,rotation:.1,velocity:new o.Pa4((Math.random()>.5?-1:1)*Math.random()*150,(Math.random()>.5?-1:1)*Math.random()*150,(Math.random()>.5?-1:1)*Math.random()*150),acceleration:new o.Pa4(0,2.5,0),mesh:e,material:e.material})})),De.view.view.removeFromParent(),ce().remove(De.view.view),t.player.collisionOpacityValuesDuration=2e3,function(){var e=ye.find((function(e){return"asteroid_collision_sound"===e.id}));if(!e)throw new Error("Sound data with id: ".concat(e," not found."));"suspended"!==xe.context.state?(xe.stop(),xe.setBuffer(e.buffer),xe.setLoop(!1),xe.setVolume(_e),xe.play()):xe.context.resume().then((function(){xe.setBuffer(e.buffer),xe.setLoop(!1),xe.setVolume(_e),xe.play()}))}(),t.hp-=1,n.setHP(t.hp))},filterCollidedWithPlayer:function(e){e.asteroids=e.asteroids.filter((function(e){return!e.collidedWithPlayer}))}},Ge=n(420),Ue=(0,Ge.Q_)("gameData",{state:function(){return{score:0,hp:3}},actions:{setScore:function(e){this.$state.score=e},setHP:function(e){this.$state.hp=e},reloadGame:function(){var e=je();ht.stopRender(),Q.clear(),re=[],oe.lookAt(0,0,0),Q.add(ne),Q.add(oe),ee.position.y=8,ee.position.z=-6,ee.lookAt(0,3,4),Qe.restart(),requestAnimationFrame(ht.doRender),this.$state.hp=3,this.$state.score=0,e.showGameOver=!1,e.showHUD=!0},resumeGame:function(){var e=je();ht.resumeRender(),e.showPause=!1}}}),je=(0,Ge.Q_)("ui",{state:function(){return{showHUD:!1,showGameOver:!1,showPause:!1,showLoading:!0,soundButtonToggled:!1}},actions:{setShowHUD:function(e){this.$state.showHUD=e},setShowGameOver:function(e){this.$state.showGameOver=e},setShowLoading:function(e){this.$state.showLoading=e},setShowPause:function(e){this.$state.showPause=e},setToggleSoundButtonState:function(e){this.$state.soundButtonToggled=e},toggleSoundButton:function(){this.$state.soundButtonToggled=!this.$state.soundButtonToggled,this.$state.soundButtonToggled?Te(0):this.$state.soundButtonToggled||Te(1)}}}),ze=(0,Ge.WB)(),Ve=function(e){var t=[];return{add:function(e){t.push(e)},value:function(n){for(var o=0,r=0;r<t.length&&!(t[r][0]>=n);r++)o=r;var i=Math.min(t.length-1,o+1);return o==i?t[o][1]:e((n-t[o][0])/(t[i][0]-t[o][0]),t[o][1],t[i][1])}}},Ze=function(){return Ze=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},Ze.apply(this,arguments)},Ke=function(){return Ke=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},Ke.apply(this,arguments)},We=null,Xe=null,$e=null,qe=null,Je=null,Ye=function(){We={player:null,leftBoundaryLine:null,rightBoundaryLine:null,timeElapsed:0,stars:[],asteroids:[],starSpawnCooldown:2e3,asteroidSpawnCooldown:2e3,moveShipCooldown:0,movementLineSwapping:!1,movementLineId:2,asteroidParticles:[],hp:3};var e=He(),t=Ie();e.view=t,Ce(e),Le("left"),We.leftBoundaryLine=e;var n=He(),r=Ie();n.view=r,Ce(n),Le("right"),We.rightBoundaryLine=n;var i={speed:1,acceleration:0,score:0,position:new o.Pa4(0,0,0),targetPosition:new o.Pa4(0,0,0),rotation:new o._fP,view:null,collisionOpacityValueChangeDirection:1,collisionOpacityValuesDuration:0},s=function(){var e="ship_model_id",t="ship_turbo_id",n=de("ship_source",e),r=de("turbo_source",t);r.model.name="turbo_left_front_side";var i=de("turbo_source",t);i.model.name="turbo_left_back_side";var s=de("turbo_source",t);s.model.name="turbo_right_front_side";var a=de("turbo_source",t);a.model.name="turbo_right_back_side",r.model.visible=!1,i.model.visible=!1,s.model.visible=!1,a.model.visible=!1;var l=new o.jyz({vertexShader:me("turbo").v,fragmentShader:me("turbo").f,transparent:!0,blending:o.WMw,side:o.Wl3,uniforms:{timeElapsed:{value:Qe.getGameState().timeElapsed}}}),c=new o.jyz({vertexShader:me("turbo").v,fragmentShader:me("turbo").f,transparent:!0,blending:o.WMw,side:o._Li,uniforms:{timeElapsed:{value:Qe.getGameState().timeElapsed}}});n.model.children.forEach((function(e){var t=e.material;t.transparent=!0,t.opacity=1})),l.uniformsNeedUpdate=!0,c.uniformsNeedUpdate=!0;var u={view:n.model,instanceId:e};return r.model.scale.set(.5,.5,.5),r.model.material=l,u.view.add(r.model),r.model.visible=!0,r.model.position.setY(r.model.position.y-1),r.model.position.setZ(r.model.position.z+.5),r.model.position.setX(r.model.position.x-.4),i.model.scale.set(.5,.5,.5),i.model.material=c,u.view.add(i.model),i.model.visible=!0,i.model.position.setY(i.model.position.y-1),i.model.position.setZ(i.model.position.z+.5),i.model.position.setX(i.model.position.x-.4),s.model.scale.set(.5,.5,.5),s.model.material=l,u.view.add(s.model),s.model.visible=!0,s.model.position.setY(s.model.position.y-1),s.model.position.setZ(s.model.position.z+.5),s.model.position.setX(s.model.position.x+.4),a.model.scale.set(.5,.5,.5),a.model.material=c,u.view.add(a.model),a.model.visible=!0,a.model.position.setY(a.model.position.y-1),a.model.position.setZ(a.model.position.z+.5),a.model.position.setX(a.model.position.x+.4),u}();i.view=s,function(e){Ee=e}(i),We.player=i,Ee.acceleration=0,Ee.targetPosition.set(0,0,1),Ee.position.set(0,0,1),Ee.speed=.2,Xe=Ue(),$e=je(),qe=function(e){var t=[],n=function(){return((ht.getHeight()<768?2.2*ht.getHeight():ht.getHeight())||window.innerHeight)/(2*Math.tan(30*Math.PI/180))},r={diffuseTexture:{value:fe(e.diffuseTextureId).texture},pointMultiplier:{value:n()}},i=new o.jyz({uniforms:r,vertexShader:me("sprite_particles").v,fragmentShader:me("sprite_particles").f,blending:o.WMw,depthTest:!0,depthWrite:!1,transparent:!0,vertexColors:!0}),s=new o.u9r;s.setAttribute("position",new o.a$l([],3)),s.setAttribute("size",new o.a$l([],1)),s.setAttribute("colour",new o.a$l([],4)),s.setAttribute("angle",new o.a$l([],1));var a=new o.woe(s,i);e.scene.add(a);var l=e.alphaSpline||Ve((function(e,t,n){return t+e*(n-t)}));e.alphaSpline||(l.add([0,0]),l.add([.1,1]),l.add([.6,1]),l.add([1,0]));var c=e.colorSpline||Ve((function(e,t,n){return t.clone().lerp(n,e)}));e.colorSpline||(c.add([0,new o.Ilk(16776960)]),c.add([1,new o.Ilk(11184810)]));var u=e.sizeSpline||Ve((function(e,t,n){return t+e*(n-t)}));e.sizeSpline||(u.add([0,0]),u.add([.5,5]),u.add([1,1]));var d=function(){for(var e=[],n=[],r=[],i=[],a=0,l=t;a<l.length;a++){var c=l[a];e.push(c.position.x,c.position.y,c.position.z),n.push(c.color.r,c.color.g,c.color.b,c.alpha),i.push(c.currentSize),r.push(c.rotation)}s.setAttribute("position",new o.a$l(e,3)),s.setAttribute("size",new o.a$l(i,1)),s.setAttribute("colour",new o.a$l(n,4)),s.setAttribute("angle",new o.a$l(r,1)),s.attributes.position.needsUpdate=!0,s.attributes.size.needsUpdate=!0,s.attributes.colour.needsUpdate=!0,s.attributes.angle.needsUpdate=!0,s.computeBoundingSphere()};return d(),{add:function(e){e?t.push(Ze({},e)):t.push({position:new o.Pa4(1*(2*Math.random()-1),1*(2*Math.random()-1),1*(2*Math.random()-1)),currentSize:4*(.5*Math.random()+.5),maxSize:4*(.5*Math.random()+.5),color:new o.Ilk,alpha:1,currentLifeTime:2e3,maxLifeTime:2e3,rotation:2*Math.random()*Math.PI,velocity:new o.Pa4(0,-15,0)})},update:function(o){i.uniforms.pointMultiplier.value=n(),d(),function(n){for(var o=0,r=t;o<r.length;o++)(a=r[o]).currentLifeTime-=n;t=t.filter((function(e){return e.currentLifeTime>0}));for(var i=0,s=t;i<s.length;i++){var a,d=1-(a=s[i]).currentLifeTime/a.maxLifeTime;a.rotation+=.5*n,a.alpha=+l.value(d),a.currentSize=a.maxSize*+u.value(d),a.color.copy(c.value(d)),a.position.add(a.velocity.clone().multiplyScalar(.1*n));var p=a.acceleration||a.velocity.clone();a.acceleration||(p.multiplyScalar(.1*n),p.x=Math.sign(a.velocity.x)*Math.min(Math.abs(p.x),Math.abs(a.velocity.x)),p.y=Math.sign(a.velocity.y)*Math.min(Math.abs(p.y),Math.abs(a.velocity.y)),p.z=Math.sign(a.velocity.z)*Math.min(Math.abs(p.z),Math.abs(a.velocity.z))),a.velocity.sub(p)}t.sort((function(t,n){var o=e.camera.position.distanceTo(t.position);return e.camera.position.distanceTo(n.position)-o}))}(o)}}}({diffuseTextureId:"star_particle_texture",scene:ce(),camera:ue()}),Je=function(e){var t=[],n=e.alphaSpline||Ve((function(e,t,n){return t+e*(n-t)}));e.alphaSpline||(n.add([0,0]),n.add([.2,1]),n.add([.6,.6]),n.add([1,0]));var r=e.sizeSpline||Ve((function(e,t,n){return t+e*(n-t)}));return e.sizeSpline||(r.add([0,0]),r.add([.5,.3]),r.add([1,1])),{add:function(n){if(n){var o=Ke({},n);return e.scene.add(o.mesh),void t.push(n)}},update:function(r){!function(r){for(var i=0,s=t;i<s.length;i++)(c=s[i]).currentLifeTime-=r,c.currentLifeTime<=0&&e.scene.remove(c.mesh);t=t.filter((function(e){return e.currentLifeTime>0}));for(var a=0,l=t;a<l.length;a++){var c,u=1-(c=l[a]).currentLifeTime/c.maxLifeTime;c.rotation+=.5*r,c.alpha=+n.value(u),c.currentSize=c.maxSize,c.position.add(c.velocity.clone().multiplyScalar(.1*r));var d=c.acceleration||c.velocity.clone();c.acceleration||(d.multiplyScalar(.1*r),d.x=Math.sign(c.velocity.x)*Math.min(Math.abs(d.x),Math.abs(c.velocity.x)),d.y=Math.sign(c.velocity.y)*Math.min(Math.abs(d.y),Math.abs(c.velocity.y)),d.z=Math.sign(c.velocity.z)*Math.min(Math.abs(d.z),Math.abs(c.velocity.z))),c.velocity.sub(d),c.material.opacity=c.alpha,c.mesh.rotation.setFromQuaternion((new o._fP).setFromEuler(new o.USm(c.rotation,0,c.rotation))),c.mesh.position.copy(c.position),c.mesh.scale.set(c.currentSize,c.currentSize,c.currentSize)}t.sort((function(t,n){var o=e.camera.position.distanceTo(t.position);return e.camera.position.distanceTo(n.position)-o}))}(r)}}}({scene:ce(),camera:ue()})},Qe={initialize:Ye,processLogic:function(e){var t,n,r,i,s=.25*Math.ceil(We.timeElapsed/15e3)+1;0===We.hp&&($e.showHUD=!1,$e.showGameOver=!0,ce().remove(We.player.view.view)),function(e,t){Ee.targetPosition=Ee.position.clone(),Ee.targetPosition.add(new o.Pa4(0,0,Ee.speed*t));var n=Ee.position.lerp(Ee.targetPosition,1-Math.exp(-.75*e));Ee.position.copy(n),Ee.view.view.position.copy(Ee.position)}(e,s),function(e,t){var n=Math.sin(.006*t)||0,r=o.M8C.mapLinear(n,-1,1,-.3,.3);Ee.targetPosition=Ee.position.clone(),Ee.targetPosition.setY(r),Ee.position.copy(Ee.targetPosition),Ee.view.view.position.copy(Ee.position)}(0,We.timeElapsed),function(e){if(1===Qe.getGameState().movementLineId){Ee.targetPosition=Ee.position.clone(),Ee.targetPosition.setX(9);var t=Ee.position.lerp(Ee.targetPosition,e/100);Ee.position.copy(t),Ee.view.view.position.copy(Ee.position)}2===Qe.getGameState().movementLineId&&(Ee.targetPosition=Ee.position.clone(),Ee.targetPosition.setX(0),t=Ee.position.lerp(Ee.targetPosition,e/100),Ee.position.copy(t),Ee.view.view.position.copy(Ee.position)),3===Qe.getGameState().movementLineId&&(Ee.targetPosition=Ee.position.clone(),Ee.targetPosition.setX(-9),t=Ee.position.lerp(Ee.targetPosition,e/100),Ee.position.copy(t),Ee.view.view.position.copy(Ee.position)),!Qe.getGameState().movementLineSwapping&&(Se.a||Se.d||Se.leftDirectionSwipe||Se.rightDirectionSwipe)&&0===Qe.getGameState().moveShipCooldown&&(Qe.getGameState().movementLineSwapping=!0,Qe.getGameState().moveShipCooldown=200,(Se.a||Se.rightDirectionSwipe)&&(Qe.getGameState().movementLineId=o.M8C.clamp(--Qe.getGameState().movementLineId,1,3)),(Se.d||Se.leftDirectionSwipe)&&(Qe.getGameState().movementLineId=o.M8C.clamp(++Qe.getGameState().movementLineId,1,3))),Qe.getGameState().movementLineSwapping&&Qe.getGameState().moveShipCooldown>0&&(Qe.getGameState().moveShipCooldown-=e),Qe.getGameState().movementLineSwapping&&Qe.getGameState().moveShipCooldown<=0&&(Qe.getGameState().movementLineSwapping=!1,Qe.getGameState().moveShipCooldown=0)}(e),function(e,t){if(t.player.collisionOpacityValuesDuration>0){var n=t.player.view.view,r=0,i=0;n.children.forEach((function(n){var s=n.material;Re(n)||(s.userData.defaultSide=s.side,s.side=o.Wl3),s.opacity-=e/50*t.player.collisionOpacityValueChangeDirection,s.opacity=o.M8C.clamp(s.opacity,0,.8),0===s.opacity&&(r+=1),.8===s.opacity&&(i+=1)})),r===n.children.length&&(t.player.collisionOpacityValueChangeDirection=-1,r=0),i===n.children.length&&(t.player.collisionOpacityValueChangeDirection=1,i=0),t.player.collisionOpacityValuesDuration-=e,t.player.collisionOpacityValuesDuration=o.M8C.clamp(t.player.collisionOpacityValuesDuration,0,2e3),0===t.player.collisionOpacityValuesDuration&&n.children.forEach((function(e){var t=e.material;Re(e)||(t.side=t.userData.defaultSide),t.opacity=1}))}}(e,We),Ce(We.leftBoundaryLine),We.leftBoundaryLine.view,Pe(e,s),Ce(We.rightBoundaryLine),We.rightBoundaryLine.view,Pe(e,s),ke.spawn(e,We,s);for(var a=0,l=We.stars;a<l.length;a++){var c=l[a];ke.setState(c),ke.setView(c.view),ke.rotationStar(e),ke.playerCollision(e,We,Xe,qe)}Be.spawn(e,We,s);for(var u=0,d=We.asteroids;u<d.length;u++){var p=d[u];Be.setState(p),Be.setView(p.view),Be.fadeIn(e),Be.playerCollision(e,We,Xe,Je)}(function(e,t){ge().copy(ue().position.clone()),ge().add(new o.Pa4(0,0,.2*t));var n=ue().position.lerp(ge(),1-Math.exp(-.75*e));ue().position.copy(n)})(e,s),qe.update(.001*e),Je.update(.001*e),t=We.player.view.view.getObjectByName("turbo_left_front_side").material,n=We.player.view.view.getObjectByName("turbo_left_back_side").material,r=We.player.view.view.getObjectByName("turbo_right_front_side").material,i=We.player.view.view.getObjectByName("turbo_right_back_side").material,t.uniforms.timeElapsed.value=We.timeElapsed,n.uniforms.timeElapsed.value=We.timeElapsed,r.uniforms.timeElapsed.value=We.timeElapsed,i.uniforms.timeElapsed.value=We.timeElapsed},restart:function(){Ye()},getGameState:function(){return We}},et=null,tt=-1,nt=-1,ot=-1,rt=-1,it=0,st=!1,at=-1,lt=1920/919,ct=0,ut=performance.now(),dt=function(e){-1===nt&&(nt=e,rt=e,ot=0),st||(ot=rt/(it+=1),rt=e-nt,Math.floor(e-ut)>=Math.floor(1e3/60)&&(Qe.getGameState().timeElapsed=rt,Qe.processLogic(ot),ut=e),null==et||et.render(ce(),ue()),tt=requestAnimationFrame(dt))},pt=function(){if(et){var e=et.domElement,t=window.devicePixelRatio||1,n=0,o=0,r=document.documentElement.offsetWidth/document.documentElement.offsetHeight;r>lt&&(n=document.documentElement.offsetHeight*lt,o=document.documentElement.offsetHeight),r<=lt&&(n=document.documentElement.offsetWidth,o=document.documentElement.offsetWidth*(1/lt)),e.style.width="".concat(n,"px"),e.style.height="".concat(o,"px"),document.body.style.setProperty("--canvas-aspect-ratio-width","".concat(n,"px")),document.body.style.setProperty("--canvas-aspect-ratio-height","".concat(o,"px")),ct=o,et.setSize(n*t,o*t,!1),ue().aspect=e.clientWidth/e.clientHeight,ue().updateProjectionMatrix()}},ht={doRender:dt,setRenderer:function(e){null==(et=new o.CP7({canvas:e,antialias:!0}))||et.render(ce(),ue()),pt()},resizeRendererToDisplaySize:pt,stopRender:function(){cancelAnimationFrame(tt),tt=-1,rt=-1,it=0,nt=-1},pauseRender:function(){st=!0,at=rt,cancelAnimationFrame(tt)},resumeRender:function(){st=!1,nt=performance.now()-at,tt=requestAnimationFrame(dt)},getHeight:function(){return ct}},mt=n(252),ft=n(577),gt=n(262);const vt="undefined"!=typeof document?document:null,wt=vt&&vt.createElement("template"),bt={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,o)=>{const r="svg"===t?vt.createElementNS("http://www.w3.org/2000/svg",e):"mathml"===t?vt.createElementNS("http://www.w3.org/1998/Math/MathML",e):vt.createElement(e,n?{is:n}:void 0);return"select"===e&&o&&null!=o.multiple&&r.setAttribute("multiple",o.multiple),r},createText:e=>vt.createTextNode(e),createComment:e=>vt.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>vt.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,o,r,i){const s=n?n.previousSibling:t.lastChild;if(r&&(r===i||r.nextSibling))for(;t.insertBefore(r.cloneNode(!0),n),r!==i&&(r=r.nextSibling););else{wt.innerHTML="svg"===o?`<svg>${e}</svg>`:"mathml"===o?`<math>${e}</math>`:e;const r=wt.content;if("svg"===o||"mathml"===o){const e=r.firstChild;for(;e.firstChild;)r.appendChild(e.firstChild);r.removeChild(e)}t.insertBefore(r,n)}return[s?s.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},xt="transition",yt="animation",_t=Symbol("_vtc"),At=(e,{slots:t})=>(0,mt.h)(mt.P$,function(e){const t={};for(const n in e)n in Tt||(t[n]=e[n]);if(!1===e.css)return t;const{name:n="v",type:o,duration:r,enterFromClass:i=`${n}-enter-from`,enterActiveClass:s=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=i,appearActiveClass:c=s,appearToClass:u=a,leaveFromClass:d=`${n}-leave-from`,leaveActiveClass:p=`${n}-leave-active`,leaveToClass:h=`${n}-leave-to`}=e,m=function(e){if(null==e)return null;if((0,ft.Kn)(e))return[Rt(e.enter),Rt(e.leave)];{const t=Rt(e);return[t,t]}}(r),f=m&&m[0],g=m&&m[1],{onBeforeEnter:v,onEnter:w,onEnterCancelled:b,onLeave:x,onLeaveCancelled:y,onBeforeAppear:_=v,onAppear:A=w,onAppearCancelled:T=b}=t,S=(e,t,n)=>{Lt(e,t?u:a),Lt(e,t?c:s),n&&n()},E=(e,t)=>{e._isLeaving=!1,Lt(e,d),Lt(e,h),Lt(e,p),t&&t()},R=e=>(t,n)=>{const r=e?A:w,s=()=>S(t,e,n);St(r,[t,s]),Pt((()=>{Lt(t,e?l:i),Mt(t,e?u:a),Et(r)||It(t,o,f,s)}))};return(0,ft.l7)(t,{onBeforeEnter(e){St(v,[e]),Mt(e,i),Mt(e,s)},onBeforeAppear(e){St(_,[e]),Mt(e,l),Mt(e,c)},onEnter:R(!1),onAppear:R(!0),onLeave(e,t){e._isLeaving=!0;const n=()=>E(e,t);Mt(e,d),document.body.offsetHeight,Mt(e,p),Pt((()=>{e._isLeaving&&(Lt(e,d),Mt(e,h),Et(x)||It(e,o,g,n))})),St(x,[e,n])},onEnterCancelled(e){S(e,!1),St(b,[e])},onAppearCancelled(e){S(e,!0),St(T,[e])},onLeaveCancelled(e){E(e),St(y,[e])}})}(e),t);At.displayName="Transition";const Tt={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},St=(At.props=(0,ft.l7)({},mt.nJ,Tt),(e,t=[])=>{(0,ft.kJ)(e)?e.forEach((e=>e(...t))):e&&e(...t)}),Et=e=>!!e&&((0,ft.kJ)(e)?e.some((e=>e.length>1)):e.length>1);function Rt(e){return(0,ft.He)(e)}function Mt(e,t){t.split(/\s+/).forEach((t=>t&&e.classList.add(t))),(e[_t]||(e[_t]=new Set)).add(t)}function Lt(e,t){t.split(/\s+/).forEach((t=>t&&e.classList.remove(t)));const n=e[_t];n&&(n.delete(t),n.size||(e[_t]=void 0))}function Pt(e){requestAnimationFrame((()=>{requestAnimationFrame(e)}))}let Ct=0;function It(e,t,n,o){const r=e._endId=++Ct,i=()=>{r===e._endId&&o()};if(n)return setTimeout(i,n);const{type:s,timeout:a,propCount:l}=function(e,t){const n=window.getComputedStyle(e),o=e=>(n[e]||"").split(", "),r=o(`${xt}Delay`),i=o(`${xt}Duration`),s=Ot(r,i),a=o(`${yt}Delay`),l=o(`${yt}Duration`),c=Ot(a,l);let u=null,d=0,p=0;return t===xt?s>0&&(u=xt,d=s,p=i.length):t===yt?c>0&&(u=yt,d=c,p=l.length):(d=Math.max(s,c),u=d>0?s>c?xt:yt:null,p=u?u===xt?i.length:l.length:0),{type:u,timeout:d,propCount:p,hasTransform:u===xt&&/\b(transform|all)(,|$)/.test(o(`${xt}Property`).toString())}}(e,t);if(!s)return o();const c=s+"end";let u=0;const d=()=>{e.removeEventListener(c,p),i()},p=t=>{t.target===e&&++u>=l&&d()};setTimeout((()=>{u<l&&d()}),a+1),e.addEventListener(c,p)}function Ot(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map(((t,n)=>Nt(t)+Nt(e[n]))))}function Nt(e){return"auto"===e?0:1e3*Number(e.slice(0,-1).replace(",","."))}const kt=Symbol("_vod"),Ht=Symbol(""),Dt=/\s*!important$/;function Ft(e,t,n){if((0,ft.kJ)(n))n.forEach((n=>Ft(e,t,n)));else if(null==n&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const o=function(e,t){const n=Gt[t];if(n)return n;let o=(0,ft._A)(t);if("filter"!==o&&o in e)return Gt[t]=o;o=(0,ft.kC)(o);for(let n=0;n<Bt.length;n++){const r=Bt[n]+o;if(r in e)return Gt[t]=r}return t}(e,t);Dt.test(n)?e.setProperty((0,ft.rs)(o),n.replace(Dt,""),"important"):e[o]=n}}const Bt=["Webkit","Moz","ms"],Gt={},Ut="http://www.w3.org/1999/xlink";const jt=Symbol("_vei");const zt=/(?:Once|Passive|Capture)$/;let Vt=0;const Zt=Promise.resolve(),Kt=()=>Vt||(Zt.then((()=>Vt=0)),Vt=Date.now()),Wt=e=>111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123;"undefined"!=typeof HTMLElement&&HTMLElement,Symbol("_moveCb"),Symbol("_enterCb"),Symbol("_assign");const Xt=(0,ft.l7)({patchProp:(e,t,n,o,r,i,s,a,l)=>{const c="svg"===r;"class"===t?function(e,t,n){const o=e[_t];o&&(t=(t?[t,...o]:[...o]).join(" ")),null==t?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}(e,o,c):"style"===t?function(e,t,n){const o=e.style,r=o.display,i=(0,ft.HD)(n);if(n&&!i){if(t&&!(0,ft.HD)(t))for(const e in t)null==n[e]&&Ft(o,e,"");for(const e in n)Ft(o,e,n[e])}else if(i){if(t!==n){const e=o[Ht];e&&(n+=";"+e),o.cssText=n}}else t&&e.removeAttribute("style");kt in e&&(o.display=r)}(e,n,o):(0,ft.F7)(t)?(0,ft.tR)(t)||function(e,t,n,o,r=null){const i=e[jt]||(e[jt]={}),s=i[t];if(o&&s)s.value=o;else{const[n,a]=function(e){let t;if(zt.test(e)){let n;for(t={};n=e.match(zt);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[":"===e[2]?e.slice(3):(0,ft.rs)(e.slice(2)),t]}(t);if(o){const s=i[t]=function(e,t){const n=e=>{if(e._vts){if(e._vts<=n.attached)return}else e._vts=Date.now();(0,mt.$d)(function(e,t){if((0,ft.kJ)(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map((e=>t=>!t._stopped&&e&&e(t)))}return t}(e,n.value),t,5,[e])};return n.value=e,n.attached=Kt(),n}(o,r);!function(e,t,n,o){e.addEventListener(t,n,o)}(e,n,s,a)}else s&&(function(e,t,n,o){e.removeEventListener(t,n,o)}(e,n,s,a),i[t]=void 0)}}(e,t,0,o,s):("."===t[0]?(t=t.slice(1),1):"^"===t[0]?(t=t.slice(1),0):function(e,t,n,o){if(o)return"innerHTML"===t||"textContent"===t||!!(t in e&&Wt(t)&&(0,ft.mf)(n));if("spellcheck"===t||"draggable"===t||"translate"===t)return!1;if("form"===t)return!1;if("list"===t&&"INPUT"===e.tagName)return!1;if("type"===t&&"TEXTAREA"===e.tagName)return!1;if("width"===t||"height"===t){const t=e.tagName;if("IMG"===t||"VIDEO"===t||"CANVAS"===t||"SOURCE"===t)return!1}return(!Wt(t)||!(0,ft.HD)(n))&&t in e}(e,t,o,c))?function(e,t,n,o,r,i,s){if("innerHTML"===t||"textContent"===t)return o&&s(o,r,i),void(e[t]=null==n?"":n);const a=e.tagName;if("value"===t&&"PROGRESS"!==a&&!a.includes("-")){e._value=n;const o=null==n?"":n;return("OPTION"===a?e.getAttribute("value"):e.value)!==o&&(e.value=o),void(null==n&&e.removeAttribute(t))}let l=!1;if(""===n||null==n){const o=typeof e[t];"boolean"===o?n=(0,ft.yA)(n):null==n&&"string"===o?(n="",l=!0):"number"===o&&(n=0,l=!0)}try{e[t]=n}catch(e){}l&&e.removeAttribute(t)}(e,t,o,i,s,a,l):("true-value"===t?e._trueValue=o:"false-value"===t&&(e._falseValue=o),function(e,t,n,o,r){if(o&&t.startsWith("xlink:"))null==n?e.removeAttributeNS(Ut,t.slice(6,t.length)):e.setAttributeNS(Ut,t,n);else{const o=(0,ft.Pq)(t);null==n||o&&!(0,ft.yA)(n)?e.removeAttribute(t):e.setAttribute(t,o?"":n)}}(e,t,o,c))}},bt);let $t;const qt={class:"app-button"};var Jt=n(379),Yt=n.n(Jt),Qt=n(795),en=n.n(Qt),tn=n(569),nn=n.n(tn),on=n(565),rn=n.n(on),sn=n(216),an=n.n(sn),ln=n(589),cn=n.n(ln),un=n(195),dn={};dn.styleTagTransform=cn(),dn.setAttributes=rn(),dn.insert=nn().bind(null,"head"),dn.domAPI=en(),dn.insertStyleElement=an(),Yt()(un.Z,dn),un.Z&&un.Z.locals&&un.Z.locals;var pn=n(744);const hn={},mn=(0,pn.Z)(hn,[["render",function(e,t){return(0,mt.wg)(),(0,mt.iD)("button",qt,[(0,mt.WI)(e.$slots,"default",{},void 0,!0)])}],["__scopeId","data-v-338c83ce"]]),fn=(0,mt.aZ)({__name:"toggle-button",props:{modelValue:{type:Boolean}},emits:["update"],setup:function(e,t){return t.emit,function(e,t){return e.modelValue?((0,mt.wg)(),(0,mt.j4)(mn,{key:0},{default:(0,mt.w5)((function(){return[(0,mt.WI)(e.$slots,"toggled")]})),_:3})):((0,mt.wg)(),(0,mt.j4)(mn,{key:1},{default:(0,mt.w5)((function(){return[(0,mt.WI)(e.$slots,"toggled-off")]})),_:3}))}}});var gn=n(754),vn={};vn.styleTagTransform=cn(),vn.setAttributes=rn(),vn.insert=nn().bind(null,"head"),vn.domAPI=en(),vn.insertStyleElement=an(),Yt()(gn.Z,vn),gn.Z&&gn.Z.locals&&gn.Z.locals;const wn=(0,pn.Z)(fn,[["__scopeId","data-v-2b065be4"]]);var bn=["src"],xn={class:"state-info__value"};const yn=(0,mt.aZ)({__name:"state-info",props:{borderLeft:{type:Boolean,default:!1},borderTop:{type:Boolean,default:!1},borderRight:{type:Boolean,default:!1},borderBottom:{type:Boolean,default:!1},borderBottomLeftRadius:{type:Boolean,default:!1},borderBottomRightRadius:{type:Boolean,default:!1},borderTopLeftRadius:{type:Boolean,default:!1},borderTopRightRadius:{type:Boolean,default:!1},imageWidth:{default:35},imagePath:{},stateValue:{default:0}},setup:function(e){return function(e,t){return(0,mt.wg)(),(0,mt.iD)("div",{class:(0,ft.C_)(["state-info",{"border-left":e.borderLeft,"border-right":e.borderRight,"border-top":e.borderTop,"border-bottom":e.borderBottom,"border-bottom-left-radius":e.borderBottomLeftRadius,"border-bottom-right-radius":e.borderBottomRightRadius,"border-top-left-radius":e.borderTopLeftRadius,"border-top-right-radius":e.borderTopRightRadius}])},[(0,mt._)("img",{class:"state-info__image",src:e.imagePath,alt:""},null,8,bn),(0,mt._)("span",xn,(0,ft.zw)(e.stateValue),1)],2)}}});var _n=n(238),An={};An.styleTagTransform=cn(),An.setAttributes=rn(),An.insert=nn().bind(null,"head"),An.domAPI=en(),An.insertStyleElement=an(),Yt()(_n.Z,An),_n.Z&&_n.Z.locals&&_n.Z.locals;const Tn=(0,pn.Z)(yn,[["__scopeId","data-v-523b9fdf"]]);var Sn={class:"hud"},En=(0,mt._)("img",{src:"images/sound-button-off.png"},null,-1),Rn=(0,mt._)("img",{src:"images/sound-button.png"},null,-1);const Mn=(0,mt.aZ)({__name:"index",props:{data:{default:function(){return{score:0,hp:3}}}},setup:function(e){var t=je();return function(e,n){return(0,mt.wg)(),(0,mt.iD)("div",Sn,[(0,mt.Wm)(Tn,{class:"tries","border-right":!0,"border-bottom":!0,"border-bottom-right-radius":!0,"state-value":e.data.hp,"image-path":"images/ship.png"},null,8,["state-value","image-path"]),(0,mt.Wm)(Tn,{class:"score","border-right":!0,"border-bottom":!0,"border-left":!0,"border-bottom-left-radius":!0,"border-bottom-right-radius":!0,"state-value":e.data.score,"image-path":"images/star.png"},null,8,["state-value","image-path"]),(0,mt.Wm)(wn,{modelValue:(0,gt.SU)(t).soundButtonToggled,"onUpdate:modelValue":n[0]||(n[0]=function(e){return(0,gt.SU)(t).soundButtonToggled=e}),class:"sound-toggle",onClick:(0,gt.SU)(t).toggleSoundButton},{toggled:(0,mt.w5)((function(){return[En]})),"toggled-off":(0,mt.w5)((function(){return[Rn]})),_:1},8,["modelValue","onClick"])])}}});var Ln=n(883),Pn={};Pn.styleTagTransform=cn(),Pn.setAttributes=rn(),Pn.insert=nn().bind(null,"head"),Pn.domAPI=en(),Pn.insertStyleElement=an(),Yt()(Ln.Z,Pn),Ln.Z&&Ln.Z.locals&&Ln.Z.locals;const Cn=Mn;var In={class:"gameover-screen"},On=(0,mt._)("div",{class:"gameover-screen__image-text"},[(0,mt._)("img",{src:"images/gameover.png",alt:""})],-1),Nn={class:"gameover-screen__reload-button"},kn=(0,mt._)("img",{class:"gameover-screen__reload-image",src:"images/reload-button.png",alt:""},null,-1);const Hn=(0,mt.aZ)({__name:"index",setup:function(e){var t=Ue(),n=function(){t.reloadGame()};return function(e,t){return(0,mt.wg)(),(0,mt.iD)("div",In,[On,(0,mt._)("div",Nn,[(0,mt.Wm)(mn,{onClick:n},{default:(0,mt.w5)((function(){return[kn]})),_:1})])])}}});var Dn=n(343),Fn={};Fn.styleTagTransform=cn(),Fn.setAttributes=rn(),Fn.insert=nn().bind(null,"head"),Fn.domAPI=en(),Fn.insertStyleElement=an(),Yt()(Dn.Z,Fn),Dn.Z&&Dn.Z.locals&&Dn.Z.locals;const Bn=Hn;var Gn={class:"loading-screen"},Un={class:"progress-bar"},jn=(0,mt._)("div",{class:"progress-bar__line-bg"},null,-1);const zn=(0,mt.aZ)({__name:"progress-bar",props:{total:{},modelValue:{}},emits:["update"],setup:function(e,t){t.emit;var n=e,o=(0,gt.iH)(n.total),r=(0,mt.Fl)((function(){return n.modelValue>=o.value?100:100*n.modelValue/o.value}));return function(e,t){return(0,mt.wg)(),(0,mt.iD)("div",Gn,[(0,mt._)("div",Un,[jn,(0,mt._)("div",{class:"progress-bar__line",style:(0,ft.j5)({width:"".concat(r.value,"%")})},null,4)])])}}});var Vn=n(923),Zn={};Zn.styleTagTransform=cn(),Zn.setAttributes=rn(),Zn.insert=nn().bind(null,"head"),Zn.domAPI=en(),Zn.insertStyleElement=an(),Yt()(Vn.Z,Zn),Vn.Z&&Vn.Z.locals&&Vn.Z.locals;const Kn=zn;var Wn={class:"loading-screen"};const Xn=(0,mt.aZ)({__name:"index",setup:function(e){var t=(0,gt.iH)(1),n=(0,gt.iH)(0),o=setInterval((function(){if(n.value+=.1,n.value>=.9)return n.value=.9,void clearInterval(o)}),100);return function(e,o){return(0,mt.wg)(),(0,mt.iD)("div",Wn,[(0,mt.Wm)(Kn,{modelValue:n.value,"onUpdate:modelValue":o[0]||(o[0]=function(e){return n.value=e}),class:"loading-progress",total:t.value},null,8,["modelValue","total"])])}}});var $n=n(403),qn={};qn.styleTagTransform=cn(),qn.setAttributes=rn(),qn.insert=nn().bind(null,"head"),qn.domAPI=en(),qn.insertStyleElement=an(),Yt()($n.Z,qn),$n.Z&&$n.Z.locals&&$n.Z.locals;const Jn=Xn;var Yn={class:"pause-screen"},Qn=(0,mt._)("div",{class:"pause-screen__image-text"},[(0,mt._)("img",{src:"images/pause.png",alt:""})],-1),eo={class:"pause-screen__pause-button"},to=(0,mt._)("img",{class:"pause-screen__pause-image",src:"images/pause-button.png",alt:""},null,-1);const no=(0,mt.aZ)({__name:"index",setup:function(e){var t=Ue(),n=function(){t.resumeGame()};return function(e,t){return(0,mt.wg)(),(0,mt.iD)("div",Yn,[Qn,(0,mt._)("div",eo,[(0,mt.Wm)(mn,{onClick:n},{default:(0,mt.w5)((function(){return[to]})),_:1})])])}}});var oo=n(5),ro={};ro.styleTagTransform=cn(),ro.setAttributes=rn(),ro.insert=nn().bind(null,"head"),ro.domAPI=en(),ro.insertStyleElement=an(),Yt()(oo.Z,ro),oo.Z&&oo.Z.locals&&oo.Z.locals;const io=no;var so=function(){return so=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},so.apply(this,arguments)},ao={class:"app"};const lo=(0,mt.aZ)({__name:"index",setup:function(e){var t=Ue(),n=je(),o=(0,Ge.Jk)(t),r=(0,Ge.Jk)(n),i=(0,gt.qj)(so({},o)),s=(0,gt.qj)(so({},r));return function(e,t){return(0,mt.wg)(),(0,mt.iD)("div",ao,[s.showLoading?((0,mt.wg)(),(0,mt.j4)(Jn,{key:0,class:"app__overlay loading"})):(0,mt.kq)("v-if",!0),s.showHUD?((0,mt.wg)(),(0,mt.j4)(Cn,{key:1,class:"app__overlay",data:i},null,8,["data"])):(0,mt.kq)("v-if",!0),s.showGameOver?((0,mt.wg)(),(0,mt.j4)(Bn,{key:2,class:"app__overlay"})):(0,mt.kq)("v-if",!0),s.showPause?((0,mt.wg)(),(0,mt.j4)(io,{key:3,class:"app__overlay"})):(0,mt.kq)("v-if",!0)])}}});var co=n(681),uo={};uo.styleTagTransform=cn(),uo.setAttributes=rn(),uo.insert=nn().bind(null,"head"),uo.domAPI=en(),uo.insertStyleElement=an(),Yt()(co.Z,uo),co.Z&&co.Z.locals&&co.Z.locals;const po=lo;document.addEventListener("DOMContentLoaded",(function(){return e=void 0,t=void 0,o=function(){var e,t,n;return function(e,t){var n,o,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(s=0)),s;)try{if(n=1,o&&(r=2&a[0]?o.return:a[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,a[1])).done)return r;switch(o=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,o=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((r=(r=s.trys).length>0&&r[r.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){s.label=a[1];break}if(6===a[0]&&s.label<r[1]){s.label=r[1],r=a;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(a);break}r[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],o=0}finally{n=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(o){switch(o.label){case 0:return e=document.querySelector("#game_canvas"),(t=((...e)=>{const t=($t||($t=(0,mt.Us)(Xt))).createApp(...e),{mount:n}=t;return t.mount=e=>{const o=function(e){return(0,ft.HD)(e)?document.querySelector(e):e}(e);if(!o)return;const r=t._component;(0,ft.mf)(r)||r.render||r.template||(r.template=o.innerHTML),o.innerHTML="";const i=n(o,!1,function(e){return e instanceof SVGElement?"svg":"function"==typeof MathMLElement&&e instanceof MathMLElement?"mathml":void 0}(o));return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),i},t})(po)).use(ze),t.mount("#vue_app"),n=je(),[4,Promise.all([le({id:"ship_source",path:"models/ship_low_poly.glb"}),le({id:"asteroid_source",path:"models/ship_asteroid.glb"}),le({id:"bullet_source",path:"models/ship_bullet.glb"}),le({id:"star_source",path:"models/ship_star.glb"}),le({id:"turbo_source",path:"models/ship_turbo.glb"}),le({id:"asteroid_animation",path:"models/ship_asteroid_animation.glb"}),pe("shaders/turbo/fragment.glsl","shaders/turbo/vertex.glsl","turbo"),pe("shaders/boundary-line/fragment.glsl","shaders/boundary-line/vertex.glsl","boundary_line"),pe("shaders/star-collision-particles/fragment.glsl","shaders/star-collision-particles/vertex.glsl","star_collision_particles"),pe("shaders/sprite-particles/fragment.glsl","shaders/sprite-particles/vertex.glsl","sprite_particles"),Ae("sound/star-pickup.mp3","star_pickup_sound"),Ae("sound/asteroid-collision.mp3","asteroid_collision_sound"),he("images/default-particle.png","star_particle_texture"),he("images/star.png","star_score"),he("images/ship.png","ship_score"),he("images/pause.png","pause_text"),he("images/gameover.png","gameover_text"),he("images/reload-button.png","reload_button"),he("images/pause-button.png","pause_button"),he("images/sound-button.png","sound_button"),he("images/sound-button-off.png","sound_button_off")])];case 1:return o.sent(),Qe.initialize(),ht.setRenderer(e),ht.resizeRendererToDisplaySize(),requestAnimationFrame(ht.doRender),n.showLoading=!1,n.showHUD=!0,document.addEventListener("visibilitychange",(function(){if("hidden"===document.visibilityState){if(n.showGameOver)return void ht.pauseRender();ht.pauseRender(),n.setShowPause(!0)}"visible"!==document.visibilityState||0!==Qe.getGameState().hp||ht.resumeRender()})),window.addEventListener("resize",(function(){setTimeout((function(){ht.resizeRendererToDisplaySize()}),100)})),[2]}}))},new((n=void 0)||(n=Promise))((function(r,i){function s(e){try{l(o.next(e))}catch(e){i(e)}}function a(e){try{l(o.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((o=o.apply(e,t||[])).next())}));var e,t,n,o}))},744:(e,t)=>{t.Z=(e,t)=>{const n=e.__vccOpts||e;for(const[e,o]of t)n[e]=o;return n}}},e=>{e.O(0,[216],(()=>(14,e(e.s=14)))),e.O()}]);